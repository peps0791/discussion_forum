<html>
	<head>
		<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="  crossorigin="anonymous"></script>
		<script src = "/jquery-highlight.js"></script>
		<link href="/jquery.upvote.css" rel="stylesheet">
		<script src = "/jquery.upvote.js" type="text/javascript"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="/style.css"/>
		<script src="/createlinks.js"></script>
		<script src="/textaudit.js"></script>
		<script src="/PorterStemmer1980.min.js"></script>
		<script src="/highlight.js"></script>
		<title id = 'pagetitle'>Balancing robot tuning approach
		</title>
	</head>
	<body id = 'pagebody'>
		<div id = "loginmodals"></div>
		<div id = "issuemodals"></div>
		<div id = "highlight_tool"></div>
		<div id = "reward_tool"></div>
		<div id = "comment_tool"></div>
		<div class = "container">
			<header>
				<h1>Just Another Discussion Forum</h1>
			</header>
			<div class="topnav" id="myTopnav">
				<a href="/home">Home</a>
				<a href = "#issueModal" data-toggle="modal" style = "float:right">Report Issue</a>
			</div>
			<div class = "content">
			<div id = "ques-11998" class = "post">
			<h2>Question</h2>
			<div id="vote-11998" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">0</span>
				<a class="downvote"></a>
				<a class="star"></a>
				<p>Views :: 108</p>
			</div>
			<form id = "questionpostsform" method="GET" action = "/ask">
				<input type="submit" id = "quesbtn" class="btn btn-primary btn-lg" value="Ask Question">
			</form>
				<h2>Balancing robot tuning approach</h2>
<p>I'm at the stage where I assembled a balancing robot and it's not maintaining a stable position. This is not a surprise I just started testing last night.  </p>

<p>My code is <a href="https://github.com/owhite/balancing_bot" rel="nofollow noreferrer">here</a>, views of the device are <a href="https://raw.githubusercontent.com/owhite/balancing_bot/master/docs/Resized_20170331_091818.jpeg" rel="nofollow noreferrer">here</a>. </p>

<p>Briefly, it's based on a teensy 3.2, a brushless motor controller that receives I2C commands that drives brushless gimbal motors. It uses an MPU9250 for angle measurement. I'm using PID control, and I made a tkinter-based interface that allows me to send it P/I/D values for realtime testing. I plan on implementing a bluetooth based serial to reduce wires going to the device. </p>

<p>At this stage I'm not asking people for specific help on debugging what's going wrong, I'm asking about a general strategy for testing. I have used the RAM on the teensy before to record PID response time and then send that data to pyplot, which was very informative before. I was wondering if it would be a good idea to detach my wheels and mount the motors to a rigid pedestal - and to do some PID tuning using that system to tweak the wobbliness/stability. My reasoning being "hey if I can't get this thing to stay upright when it's rigidly mounted to the bench, why would it work when it's got wheels on it?" </p>

<p>Are there any comments on this strategy, and would anyone want to offer other ways to go at the problem at this point? Yes, I've read the many posts on PID tuning, I'll follow them as best I can. </p>

<p>I can post pictures and other code examples but newbies only get to put two links into the OP.</p>

			</div>
			<div class = "userinfosection"  id = "userinfo-11998" data-toggle = "popover">
				<p>user name : Owen White</p>
				<p> user reputation : 1</p>
				<p class = "tagcontent" id = "usertaginfo-11998">{'None': 0, 'balance': 0, 'pid': 0, 'arduino': 0}</p>
			</div><br>
			<br><h3>Comments</h3>
				<button data-toggle = 'collapse' data-target = "#commentsection-11998">Load Comments</button></br>
			<div id = "commentsection-11998" class = 'collapse'>
			<div id = "comment-22938" class = "comment">
				<p>I once developed a three-axle gimbal system for a camera from skratch and I know this motors and control techniques very well. If you don't use some feedback of your motor postion and so a torque based technique, you will never achieve good results, especially at very slow speeds. I recommend to use in addition to the IMU two rotary encoders and a torque based approach and you will achieve a controller in minutes. Another way would be to use brushed DC motors, since you then have already torque control integrated.</p>
			</div>
			</div>
				<textarea id = "speech-11998" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-11998">
					<img id="start_img-11998" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-11998">Comment</button>

<h1>Answers</h1>
			<br><div id = "ans-12005"  class = "post">
				<h2>Answer</h2>
			<div id="vote-12005" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">0</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>Well assuming you are using a filter(Kalman or Complementary) for the IMU, the PID tuning can be quite a cumbersome task. There is not a fixed end approach on tuning your PID. It took my <a href="https://www.youtube.com/watch?v=kIL92MyehYI" rel="nofollow noreferrer">Self-Balancing Robot</a> three days to tune. But here is a general tuning strategy you could use:</p>

<ol>
<li>Set your <code>Ki</code> and <code>Kd</code> to zero and tune your <code>Kp</code> such that it is just able to balance itself with large oscillations.</li>
<li>Start with your <code>Kd</code> and see to that the oscillations are going away.</li>
<li>Now comes the optimisations and the hard part. You have to now fine tune both <code>Kp</code> and <code>Kd</code> so that oscillations go away and robot is able to balance.</li>
<li>Using the <code>Ki</code> is quite tricky as it slows down your system as you are continuously adding a term. I haven't played much with the <code>Ki</code> term, though people now and then have used it.</li>
</ol>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-12005" data-toggle = "popover">
				<p>user name : Kartik Madhira</p>
				<p> user reputation : 76</p>
				<p class = "tagcontent" id = "usertaginfo-12005">{'None': 5}</p>
			</div><br><h3>Comments</h3><p>no comments yet<p><br>
			<div id = "commentsection-12005" class = 'collapse'>
			</div>
				<textarea id = "speech-12005" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-12005">
					<img id="start_img-12005" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-12005">Comment</button>
			</div>
			<div id = "resourcestab" class = "resourcestab">
				<ul class="nav nav-tabs">
					<li class="active"><a data-toggle="tab" href="#resources">Resources</a></li>
					<li><a data-toggle="tab" href="#highlights">Highlights</a></li>
				</ul>
					<div class="tab-content">
						<div id="resources" class="tab-pane fade in active">
							<h3>Links from the Page</h3>
							<div id = "resourcescontent"></div>
						</div>
						<div id="highlights" class="tab-pane fade">
							<h3>Highlights</h3>
							<div id = "highlightcontent"></div>
						</div>
			</div>
			</div>
			<footer>Moore & Peps collaboration.</footer>
	</div>
	<script src="/post.js"></script>
	<script type="text/javascript">
		$("#loginmodals").load("/loginModal.html");
		$("#issuemodals").load("/issueModal.html");
		$("#highlight_tool").load("/highlight_tool.html");
		$("#comment_tool").load("/comment_tool.html");
		$("#reward_tool").load("/reward_tool.html");
		checkLoggedInUser()
		var content = $('.content').html();
		populateResources(content)
		getHighlights()
		setOnLinksHover()
	</script>
	<script src="/media.js"></script>
	<script src="/vote.js"></script>
	<script src="/managefunction.js"></script>
	</body>
</html>