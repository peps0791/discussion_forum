<html>
	<head>
		<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="  crossorigin="anonymous"></script>
		<script src = "/jquery-highlight.js"></script>
		<link href="/jquery.upvote.css" rel="stylesheet">
		<script src = "/jquery.upvote.js" type="text/javascript"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="/style.css"/>
		<script src="/createlinks.js"></script>
		<script src="/textaudit.js"></script>
		<script src="/PorterStemmer1980.min.js"></script>
		<script src="/highlight.js"></script>
		<title id = 'pagetitle'>Confusion regarding set point calculation in presence of non-zero yaw in quad-rotor
		</title>
	</head>
	<body id = 'pagebody'>
		<div id = "loginmodals"></div>
		<div id = "issuemodals"></div>
		<div id = "highlight_tool"></div>
		<div id = "reward_tool"></div>
		<div id = "comment_tool"></div>
		<div class = "container">
			<header>
				<h1>Just Another Discussion Forum</h1>
			</header>
			<div class="topnav" id="myTopnav">
				<a href="/home">Home</a>
				<a href = "#issueModal" data-toggle="modal" style = "float:right">Report Issue</a>
			</div>
			<div class = "content">
			<div id = "ques-12530" class = "post">
			<h2>Question</h2>
			<div id="vote-12530" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">0</span>
				<a class="downvote"></a>
				<a class="star"></a>
				<p>Views :: 14</p>
			</div>
			<form id = "questionpostsform" method="GET" action = "/ask">
				<input type="submit" id = "quesbtn" class="btn btn-primary btn-lg" value="Ask Question">
			</form>
				<h2>Confusion regarding set point calculation in presence of non-zero yaw in quad-rotor</h2>
<p>I have recently started working on a project to fly a quadrotor through a Matlab interfaced software and I was going through their sample controller code.</p>

<p>A function called "adjusted pitch and roll command" is used which modifies the given roll and pitch setpoint if any non-zero yaw is present (I think they assumed reference yaw as 0).</p>

<pre><code>function adj_roll_cmd = fcn(roll_cmd, pitch_cmd, heading)

% Given the roll and pitch commands computed for the global frame, this 
function
% rotates the roll command into the local frame, allowing the control
% command to work even for non-zero yaw.

adj_roll_cmd = roll_cmd*cos(heading) + pitch_cmd*sin(heading); %% Eqn-1
</code></pre>

<p>For the pitch command:</p>

<pre><code>function adj_pitch_cmd = fcn(pitch_cmd, roll_cmd, heading)

% Given the roll and pitch commands computed for the global frame, this 
function
% rotates the pitch command into the local frame, allowing the control
% command to work even for non-zero yaw.

adj_pitch_cmd = -roll_cmd*sin(heading) + pitch_cmd*cos(heading); %% Eqn-2
</code></pre>

<p>It's pretty clear that they have rotated the roll and pitch commands by an angle of "heading". However, I am unable to understand the logic behind it. What is the meaning of rotating <strong>"angles"</strong> (roll and pitch)? Shouldn't the commanded angles roll, pitch and yaw represent unique orientation irrespective of current heading? There shouldn't be any intermediate function like above involved according to me. </p>

<p>I am unable to visualize what's actually happening. Please clarify.</p>

<p><strong>EDIT:</strong> I found a similar question.
<a href="https://robotics.stackexchange.com/questions/2371/compensating-for-yaw-in-lateral-quadcopter-movement?rq=1">Compensating for Yaw in Lateral Quadcopter Movement</a></p>

<p>But I am still not clear. Please explain from the basics.</p>

			</div>
			<div class = "userinfosection"  id = "userinfo-12530" data-toggle = "popover">
				<p>user name : Manish</p>
				<p> user reputation : 11</p>
				<p class = "tagcontent" id = "usertaginfo-12530">{'quadcopter': 2, 'control': 2, 'None': 0, 'orientation': 0, 'pid': 2, 'dynamics': 0, 'gyroscope': 0}</p>
			</div><br>
			<br><h3>Comments</h3>
				<button data-toggle = 'collapse' data-target = "#commentsection-12530">Load Comments</button></br>
			<div id = "commentsection-12530" class = 'collapse'>
			<div id = "comment-21990" class = "comment">
				<p>I think your problem is mainly based on matlab programming. So, first of all you should solve programming problem and than ask about robotics. File exchange of matworks have many examples you can benefit.</p>
			</div>
			<div id = "comment-21999" class = "comment">
				<p>No. The problem is regarding the coordinate transformation only. My precise ques. being if there is non-zero yaw, the command should be phi/theta/psi otherwise for zero yaw - phi/theta/0. No need to rotate anything.</p>
			</div>
			</div>
				<textarea id = "speech-12530" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-12530">
					<img id="start_img-12530" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-12530">Comment</button>

<h1>Answers</h1>
			</div>
			<div id = "resourcestab" class = "resourcestab">
				<ul class="nav nav-tabs">
					<li class="active"><a data-toggle="tab" href="#resources">Resources</a></li>
					<li><a data-toggle="tab" href="#highlights">Highlights</a></li>
				</ul>
					<div class="tab-content">
						<div id="resources" class="tab-pane fade in active">
							<h3>Links from the Page</h3>
							<div id = "resourcescontent"></div>
						</div>
						<div id="highlights" class="tab-pane fade">
							<h3>Highlights</h3>
							<div id = "highlightcontent"></div>
						</div>
			</div>
			</div>
			<footer>Moore & Peps collaboration.</footer>
	</div>
	<script src="/post.js"></script>
	<script type="text/javascript">
		$("#loginmodals").load("/loginModal.html");
		$("#issuemodals").load("/issueModal.html");
		$("#highlight_tool").load("/highlight_tool.html");
		$("#comment_tool").load("/comment_tool.html");
		$("#reward_tool").load("/reward_tool.html");
		checkLoggedInUser()
		var content = $('.content').html();
		populateResources(content)
		getHighlights()
		setOnLinksHover()
	</script>
	<script src="/media.js"></script>
	<script src="/vote.js"></script>
	<script src="/managefunction.js"></script>
	</body>
</html>