<html>
	<head>
		<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="  crossorigin="anonymous"></script>
		<script src = "/jquery-highlight.js"></script>
		<link href="/jquery.upvote.css" rel="stylesheet">
		<script src = "/jquery.upvote.js" type="text/javascript"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="/style.css"/>
		<script src="/createlinks.js"></script>
		<script src="/textaudit.js"></script>
		<script src="/PorterStemmer1980.min.js"></script>
		<script src="/highlight.js"></script>
		<title id = 'pagetitle'>translation the shaft encoder data
		</title>
	</head>
	<body id = 'pagebody'>
		<div id = "loginmodals"></div>
		<div id = "issuemodals"></div>
		<div id = "highlight_tool"></div>
		<div class = "container">
			<header>
				<h1>Just Another Discussion Forum</h1>
			</header>
			<div class="topnav" id="myTopnav">
				<a href="/home">Home</a>
				<a href = "#issueModal" data-toggle="modal" style = "float:right">Report Issue</a>
			</div>
			<div class = "content">
			<div id = "ques-4384" class = "post">
			<h2>Question</h2>
			<div id="vote-4384" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">0</span>
				<a class="downvote"></a>
				<a class="star"></a>
				<p>Views :: 432</p>
			</div>
			<form id = "questionpostsform" method="GET" action = "/ask">
				<input type="submit" id = "quesbtn" class="btn btn-primary btn-lg" value="Ask Question">
			</form>
				<h2>translation the shaft encoder data</h2>
<p>I am designing a robot in real world and i want to plot everything in X,Y (Cartesian) coordinates </p>

<p>I just want to use the encoders of wheels to determine the current position of mobile robot and its orientation depending on a specific calculation formula (like this <a href="http://rossum.sourceforge.net/papers/DiffSteer/" rel="nofollow noreferrer">http://rossum.sourceforge.net/papers/DiffSteer/</a> ) even if that will lead to inaccurate calculations .</p>

<p>Actually , I found out this formula below to compute x, y coordinates from encoder data but I still confused in some sides of this formula </p>

<p><img src="https://i.stack.imgur.com/QbN00.jpg" alt="enter image description here">
<img src="https://i.stack.imgur.com/Pl42O.jpg" alt="enter image description here"></p>

<p>I had a Rover 5 chassis form Dagu with two normal DC motors and two encoders (incremental rotary encoder) per each wheel, how could I translate the pulses of encoders or how to work out the x.y position of the robot based on the shaft encoder data.</p>

<p>I deduced some of values from Rover 5 chassis :</p>

<p>cm = conversion factor that translates encoder pulses into linear wheel displacement</p>

<p>Dn = nominal wheel diameter (in mm)
:
<strong><em>about 20 Cm</em></strong></p>

<p>Ce = encoder resolution (in pulses per revolution)
:
<strong><em>Encoder resolution: 1000 state changes per 3 wheel rotations</em></strong></p>

<p>n = gear ratio of the reduction gear between the motor (where the encoder is attached) and the
drive wheel.
:
<strong><em>Gearbox ratio: 86.8:1</em></strong></p>

<p>In Rover 5 chassis there are 4 small wires with female headers. RED is +5V for the encoder , BLACK is 0V (ground) , WHITE is signal A , YELLOW is signal B . The important wires in each encoder are signal A and signal B ,so </p>

<p>How to get values of NL , NR  in the formula above from signal A &amp; signal B ?</p>

<p>Is the value of NL is the direct value from  wire signal A or signal B ? the same question for NR . </p>

<p>Thanks a lot</p>

			</div>
			<div class = "userinfosection"  id = "userinfo-4384" data-toggle = "popover">
				<p>user name : Maria</p>
				<p> user reputation : 8</p>
				<p class = "tagcontent" id = "usertaginfo-4384">{'mobile-robot': 1, 'None': 0, 'wheeled-robot': 0, 'quadrature-encoder': 0}</p>
			</div><br>
			<br><h3>Comments</h3>
				<button data-toggle = 'collapse' data-target = "#commentsection-4384">Load Comments</button></br>
			<div id = "commentsection-4384" class = 'collapse'>
			<div id = "comment-7534" class = "comment">
				<p>Welcoms to *Robotics* Maria, but it is generally a bad idea to post scans of textbook pages. While it should be considered fair use, it could open us up to accusations of copyright violation, and it is much better to use MathJax to reproduce just the equations you need. Take a look at the [tutorial](http://meta.robotics.stackexchange.com/a/131/37) for more info, it isn't difficult once you get the hang of it.</p>
			</div>
			</div>
				<textarea id = "speech-4384" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-4384">
					<img id="start_img-4384" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-4384">Comment</button>

<h1>Answers</h1>
			<br><div id = "ans-4386"  class = "post">
				<h2>Answer</h2>
			<div id="vote-4386" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">1</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p><strong>Encoders</strong></p>

<p>These are quadrature encoders.</p>

<p>Quadrature encoders have two sensors that look at a rotating wheel with black and white bins alternating in regular intervals (or magnetic sensors looking at alternating magnets).
These two sensors are shifted relative to each other, so that when one looks at a center of one bin, the other is precisely at the edge between two bins.</p>

<p>Now, when the wheel spins, you will get a change on the sensors' outputs for every time one of them crosses the bin boundary. If you have $n$ bins, the value will change $2n$ times per rotation.
At any time at most one of the A or B values will change, and you can calculate direction of rotation from the pattern.
Also, if your microcontroller is not fast enough and misses a tick, you can detect this as both A and B changing value at once.</p>

<p>So, to get $N_L$ you will have to monitor the A and B signals from the left encoder and keep count of the changes. +1 for change in one direction, -1 for change in the other direction.
The same goes for $N_R$, only this time you do it with the right side encoder.</p>

<p>concerning the $c_m$ factor, you have specified that there are 1000 state changes per three wheel rotations. That means that your $c_m$ is wheel perimeter times $\frac{3}{1000}$.</p>

<p>Some more information about quadrature encoders is here: <a href="http://letsmakerobots.com/node/24031" rel="nofollow">http://letsmakerobots.com/node/24031</a></p>

<p><strong>Calculating $x$ and $y$</strong></p>

<p>I believe it is more precise to replace equations (1.7a) and (1.7b) with</p>

<p>$$x_i = x_{i - 1} + \Delta{U_i} \cos (\theta_{i - 1} + \frac{\Delta\theta_i}{2})$$
$$y_i = y_{i - 1} + \Delta{U_i} \sin (\theta_{i - 1} + \frac{\Delta\theta_i}{2})$$</p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-4386" data-toggle = "popover">
				<p>user name : cube</p>
				<p> user reputation : 567</p>
				<p class = "tagcontent" id = "usertaginfo-4386">{'control': 2, 'None': 31, 'wifi': 2, 'kalman-filter': 3, 'calibration': 3, 'geometry': 0, 'localization': 2, 'c': 1, 'avr': 1, 'robotic-arm': 0, 'brushless-motor': 2, 'differential-drive': 2, 'esc': 1, 'motor': 2, 'mobile-robot': 2}</p>
			</div><br><h3>Comments</h3><p>no comments yet<p><br>
			<div id = "commentsection-4386" class = 'collapse'>
			</div>
				<textarea id = "speech-4386" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-4386">
					<img id="start_img-4386" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-4386">Comment</button>
			<br><div id = "ans-5285"  class = "post">
				<h2>Answer</h2>
			<div id="vote-5285" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">0</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>You seem to have gotten the correct formula.  But continue to study them until you understand how they are derived, don't just copy.  </p>

<p>One thing I can add this that odometer only works for a short distance.  A few meters and not even that if outdoors running over rocks and grass.  You need some other kind of sensor and then combine the data.  One of those 9DOF compass/accelerometer/gyros work well can now you can get them for $5 or $6 on a breakout board.  Use this and the wheel data and you are better off.  </p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-5285" data-toggle = "popover">
				<p>user name : user3150208</p>
				<p> user reputation : 431</p>
				<p class = "tagcontent" id = "usertaginfo-5285">{'None': 27}</p>
			</div><br><h3>Comments</h3><p>no comments yet<p><br>
			<div id = "commentsection-5285" class = 'collapse'>
			</div>
				<textarea id = "speech-5285" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-5285">
					<img id="start_img-5285" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-5285">Comment</button>
			</div>
			<div id = "resourcestab" class = "resourcestab">
				<ul class="nav nav-tabs">
					<li class="active"><a data-toggle="tab" href="#resources">Resources</a></li>
					<li><a data-toggle="tab" href="#summary">Summary</a></li>
				</ul>
					<div class="tab-content">
						<div id="resources" class="tab-pane fade in active">
							<h3>Resources</h3>
							<div id = "resourcescontent"></div>
						</div>
						<div id="summary" class="tab-pane fade">
							<h3>Summary</h3>
							<div id = "summarycontent"></div>
						</div>
			</div>
			</div>
			<footer>Moore & Peps collaboration.</footer>
	</div>
	<script src="/post.js"></script>
	<script type="text/javascript">
		$("#loginmodals").load("/loginModal.html");
		$("#issuemodals").load("/issueModal.html");
		$("#highlight_tool").load("/highlight_tool.html");
		checkLoggedInUser()
		var content = $('.content').html();
		populateResources(content)
		getHighlights()
		setOnLinksHover()
	</script>
	<script src="/media.js"></script>
	<script src="/vote.js"></script>
	<script src="/managefunction.js"></script>
	</body>
</html>