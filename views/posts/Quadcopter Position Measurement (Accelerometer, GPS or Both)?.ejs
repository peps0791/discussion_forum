<html>
	<head>
		<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="  crossorigin="anonymous"></script>
		<script src = "/jquery-highlight.js"></script>
		<link href="/jquery.upvote.css" rel="stylesheet">
		<script src = "/jquery.upvote.js" type="text/javascript"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="/style.css"/>
		<script src="/createlinks.js"></script>
		<script src="/textaudit.js"></script>
		<script src="/PorterStemmer1980.min.js"></script>
		<script src="/highlight.js"></script>
		<title id = 'pagetitle'>Quadcopter Position Measurement (Accelerometer, GPS or Both)?
		</title>
	</head>
	<body id = 'pagebody'>
		<div id = "loginmodals"></div>
		<div id = "issuemodals"></div>
		<div id = "highlight_tool"></div>
		<div id = "reward_tool"></div>
		<div id = "comment_tool"></div>
		<div class = "container">
			<header>
				<h1>Just Another Discussion Forum</h1>
			</header>
			<div class="topnav" id="myTopnav">
				<a href="/home">Home</a>
				<a href = "#issueModal" data-toggle="modal" style = "float:right">Report Issue</a>
			</div>
			<div class = "content">
			<div id = "ques-2263" class = "post">
			<h2>Question</h2>
			<div id="vote-2263" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">3</span>
				<a class="downvote"></a>
				<a class="star"></a>
				<p>Views :: 11619</p>
			</div>
			<form id = "questionpostsform" method="GET" action = "/ask">
				<input type="submit" id = "quesbtn" class="btn btn-primary btn-lg" value="Ask Question">
			</form>
				<h2>Quadcopter Position Measurement (Accelerometer, GPS or Both)?</h2>
<p>I previously thought that an accelerometer on a quadcopter is used to find the position by integrating the data got from it. After I read a lot and watched <a href="http://www.youtube.com/watch?v=C7JQ7Rpwn2k" rel="nofollow">this Youtube video</a> (specifically at time 23:20) about Sensor Fusion on Android Devices, I seem to get its use a little correct. I realized that it's hard to filter out the considerable noise, generated from error integration,  to get useful information about the position. I also realized that it is used along with the gyroscope and magnetometer to for fused information about orientation not linear translation.</p>

<p>For outdoor flight, I thought of the GPS data to get the relative position, but is it so accurate in away that enables position measurement (with good precision)? How do commercial quadcopters measure positions (X,Y and Z)? Is it that GPS data are fused with the accelerometer data?</p>

			</div>
			<div class = "userinfosection"  id = "userinfo-2263" data-toggle = "popover">
				<p>user name : Moayad Abu Rmilah</p>
				<p> user reputation : 79</p>
				<p class = "tagcontent" id = "usertaginfo-2263">{'quadcopter': 9, 'control': 5, 'None': 0, 'tuning': 5, 'accelerometer': 3, 'frame': 1, 'pid': 10, 'design': 5, 'sensor-fusion': 3, 'navigation': 3}</p>
			</div><br>
			<br><h3>Comments</h3><p>no comments yet<p><br>
			<div id = "commentsection-2263" class = 'collapse'>
			</div>
				<textarea id = "speech-2263" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-2263">
					<img id="start_img-2263" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-2263">Comment</button>

<h1>Answers</h1>
			<br><div id = "ans-2269"  class = "post">
				<h2>Answer</h2>
			<div id="vote-2269" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">5</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>Generally, for indoor flight, commercial quadcopters do not measure position. Instead, they measure the change in position so as to prevent the quadrotor from moving when it should not. So while accelerometers are not great for maintaining an estimate of the quadrotors position they can be used to stabilize the system, i.e. to determine what commands needed to be executed to maintain their current position.</p>

<p>Drift can still be a problem though. As such the data from the accelerometer is usually combined with other sources of information. The Kalman filter is one approach as the presenter touches on around minute 27. Another is to use a complimentary filter which are nice because they require less processing power. Some of the other sources for data for estimating the state of a quadcopter include the gyroscopes, magnometers, barometric pressure sensors, range finders (usually ultrasonic though I have seen IR sensors used), and optical flow via cameras.</p>

<p>With this additional information you could arguably still use an accelerometer for position estimation. I have not seen this done so I cannot speak to its effectiveness though. I suspect other approaches would be better. One method would be to use a laser range finder to localize the robot. Another would be to use a motion capture system as many research facilities do.</p>

<p>As a side note, beware that GPS gives absolute position $\pm \epsilon$ where $\epsilon$ accounts for error, i.e. give or take some error, as opposed to relative position.</p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-2269" data-toggle = "popover">
				<p>user name : DaemonMaker</p>
				<p> user reputation : 3321</p>
				<p class = "tagcontent" id = "usertaginfo-2269">{'control': 4, 'stereo-vision': 15, 'None': 271, 'computer-vision': 15, 'battery': 7, 'cameras': 15, 'research': 4, 'troubleshooting': 7}</p>
			</div><br><h3>Comments</h3>
				<button data-toggle = 'collapse' data-target = "#commentsection-2269">Load Comments</button></br>
			<div id = "commentsection-2269" class = 'collapse'>
			<div id = "comment-4399" class = "comment">
				<p>Optical flow is not the only way, and in fact it needs the robot to move (or at least the camera). There's stereo vision, monocular active vision with IR projection (structured light like kinect for example), and some others. In fact, a research for _indoor navigation using computer vision_ should give a lots of proposed solutions.</p>
			</div>
			<div id = "comment-4401" class = "comment">
				<p>That's true and it's why only gave some examples instead of a strict enumeration.</p>
			</div>
			<div id = "comment-4420" class = "comment">
				<p>@DaemonMaker Actually , I have already had the quadcopter, its board is [PX4FMU](http://pixhawk.org/modules/px4fmu). You may view its on-board sensors.
Since the pressure sensor is already there, is it enough to measure the altitude with high precision? Do I need to fuse its data with the accelerometer or GPS?</p>
			</div>
			<div id = "comment-4426" class = "comment">
				<p>Yes, you will need to fuse it with the other sensors because the readings will change as a result of linear movement. Even if you command it to remain with in the same plane of elevation the pressure sensor will read greater pressure as it moves.</p>
			</div>
			</div>
				<textarea id = "speech-2269" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-2269">
					<img id="start_img-2269" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-2269">Comment</button>
			<br><div id = "ans-2270"  class = "post">
				<h2>Answer</h2>
			<div id="vote-2270" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">3</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><blockquote>
  <p>Is ... GPS data ... fused with the accelerometer data?</p>
</blockquote>

<p>Yes, many aircraft use sensor-fusion techniques so both GPS data and accelerometer data effect the estimated X, Y, Z position.
Often they use a Kalman filter to do the data fusion.
(  <a href="/questions/tagged/kalman-filter" class="post-tag" title="show questions tagged &#39;kalman-filter&#39;" rel="tag">kalman-filter</a>; <a href="https://robotics.stackexchange.com/questions/277/why-do-i-need-a-kalman-filter">Why do I need a Kalman filter?</a> )</p>

<p>Measuring X,Y,Z accurately for each photo is important for assembling photos into an aerial photographic map. <a href="http://vterrain.org/Imagery/self.html" rel="nofollow noreferrer">(a)</a> <a href="http://plane.ardupilot.com/wiki/common-geotagging-images-with-mission-planner/" rel="nofollow noreferrer">(b)</a></p>

<p>Low-cost GPS receivers typically produce a X,Y,Z position once a second with an accuracy better than 20 meters. That is "good precision" for photographic mapping with a small RC aircraft or finding the destination runway in a manned aircraft. It's pretty much useless for a quadcopter flying in a room or a small field  less than 20 meters on a side.</p>

<p>(Some GPS receivers are available that use DGPS and other techniques to get better accuracy, or generate a position many more times per second, or both).</p>

<blockquote>
  <p>How do ... quadcopters measure positions (X,Y and Z)?</p>
</blockquote>

<p>They usually don't.</p>

<p>My understanding is that most quadcopters aren't doing aerial mapping or fully autonomous motion, so they don't bother calculating XYZ position. <a href="http://diydrones.com/forum/topics/quadcopter-control-function-layers" rel="nofollow noreferrer">(c)</a> <a href="http://diydrones.com/forum/topics/how-to-get-xyz-position-from-9dof-imu-output" rel="nofollow noreferrer">(d)</a></p>

<p>As you already know from that video,
quadcopters use the accelerometers to improve their estimates of the aircraft orientation (its pitch, roll, yaw).
The quadcopter needs to know the orientation in order to stay right-side-up and to avoid spinning uncontrollably.</p>

<blockquote>
  <p>How do ... quadcopters measure positions (X,Y and Z)?</p>
</blockquote>

<p>The people at the <a href="https://www.grasp.upenn.edu" rel="nofollow noreferrer">GRASP lab at U Penn</a> measure XYZ position of their quadcopters using lots of expensive motion capture cameras bolted to the walls. They produce lots of really impressive-looking videos.</p>

<p>A few cutting-edge research projects are trying to measure XYZ positions using cameras attached to the quadcopters.
<a href="http://savvash.blogspot.com/2012/05/sfly-quadrotors-navigate-outdoors-all.html" rel="nofollow noreferrer">("sFly Quadrotors Navigate Outdoors All By Themselves")</a>
( <a href="https://robotics.stackexchange.com/questions/1554/track-a-moving-object">Track a moving object</a> )
<a href="http://www.acceler8or.com/tags/quadcopter/" rel="nofollow noreferrer">("Encouraging Developments In Quadcopters (w. Lots Of Video)")</a></p>

<p>Before GPS, commercial aircraft used airport radio beacons to <del>do instrument landing</del> navigate.
I see some people talking about related techniques for <a href="https://robotics.stackexchange.com/questions/256/quadcopter-localization-beacon">radio beacon localization for quadcopters</a>.</p>

<p><a href="https://robotics.stackexchange.com/users/350/ian">Ian</a> suggests <a href="https://robotics.stackexchange.com/questions/1554/track-a-moving-object/1561#1561">tagging each landmark</a> with a unique <a href="http://www.aforgenet.com/articles/glyph_recognition/" rel="nofollow noreferrer">augmented reality glyph</a>.
Some people find it more practical to use a camera on the quadcopter to detect and estimate relative bearing to a simple red rectangular landing pad.
<a href="http://people.ece.cornell.edu/land/courses/eceprojectsland/STUDENTPROJ/2012to2013/ssm92/ssm92_report_201305171020.pdf" rel="nofollow noreferrer">("Autonomous Quadcopter Docking System")</a></p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-2270" data-toggle = "popover">
				<p>user name : David Cary</p>
				<p> user reputation : 3365</p>
				<p class = "tagcontent" id = "usertaginfo-2270">{'quadcopter': 38, 'stepper-driver': 9, 'None': 256, 'multi-rotor': 2, 'force-sensor': 9, 'stability': 36, 'industrial-robot': 1, 'design': 18, 'motor': 2, 'stepper-motor': 9}</p>
			</div><br><h3>Comments</h3>
				<button data-toggle = 'collapse' data-target = "#commentsection-2270">Load Comments</button></br>
			<div id = "commentsection-2270" class = 'collapse'>
			<div id = "comment-4404" class = "comment">
				<p>**Before GPS, commercial aircraft used airport radio beacons to do instrument landing** No, they used it to do navigation not landing! Today even with GPS, VOR (a signal is transmitted from the station in each degree with a different pattern with a highly directional antenna) is still used as navigation, and ILS (normally directional antennas in the airport) rules for landing, GPS is not used for that, the accuracy of ILS is much better.</p>
			</div>
			<div id = "comment-4434" class = "comment">
				<p>This gives good clarification. What I can think of now is that I need to use the accelerometer to get the velocity by integrating its measurements once. I don't know how much effective the application of a low pass filter will be to reduce the error in the generated velocity. From your answer, it seems to me that it is nearly impossible to make autonomous path tracking with the following sensors: accelerometer, gyroscope, magnetometer, GPS and barometric pressure because it is hard, with these sensors, to know the position.</p>
			</div>
			</div>
				<textarea id = "speech-2270" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-2270">
					<img id="start_img-2270" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-2270">Comment</button>
			<br><div id = "ans-2271"  class = "post">
				<h2>Answer</h2>
			<div id="vote-2271" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">1</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>Position measurement is all about dealing with uncertainty.  Entire books have been written on how to estimate good position from uncertain data coming from several sources, so I won't try to summarize that here.</p>

<p>In general though, what you need will depend a lot on how accurate you need to be.  Getting GPS fixes once per second (5 times per second on some hardware) is great for something like a large boat.  However, 5 fixes per second is pretty bad when you're moving at high speeds in close quarters, like a quadcopter does -- not to mention the (roughly) 20-foot circle of uncertainty in GPS positions.</p>

<p>There are many position, velocity, and acceleration sensors that you can buy.  Only some of them are practical for any given application, and terribly few of them are good enough to be considered real-time ground-truth by themselves (either operating in tightly controlled environments, or costing you hundreds of thousands of dollars).  So, you need to pick a good mix of sensors so that each one can help keep the inaccuracies of the other sensors in check. This is entirely dependent on your robot and its application; there is no one-size-fits-all.</p>

<p>Typically, you'd combine a high-accuracy-low-frequency method like GPS (or other triangulation-based scheme) with a moderate-accuracy-high-frequency method like an accelerometer or gyro.  This keeps estimates from drifting too far while giving some reasonable real-time adjustments.  </p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-2271" data-toggle = "popover">
				<p>user name : Ian</p>
				<p> user reputation : 9640</p>
				<p class = "tagcontent" id = "usertaginfo-2271">{'planning': 10, 'None': 809, 'power': 1, 'algorithm': 10, 'battery': 1, 'slam': 7, 'coverage': 10, 'mobile-robot': 9, 'sensors': 9}</p>
			</div><br><h3>Comments</h3>
				<button data-toggle = 'collapse' data-target = "#commentsection-2271">Load Comments</button></br>
			<div id = "commentsection-2271" class = 'collapse'>
			<div id = "comment-4419" class = "comment">
				<p>Well, as I already have the quadcopter, its board is [PX4FMU](http://pixhawk.org/modules/px4fmu). You may view its on-board sensors.</p>
			</div>
			<div id = "comment-4422" class = "comment">
				<p>It looks like the built-in onboard sensors are meant to handle things like real-time stability: gyros, accelerometers, magnetometers, and a pressure (altitude) sensor.  The list of peripherals suggests that you'd either drive this quadcopter "open loop" (using a remote control), outdoors with GPS, or indoors with a tracking system and radio telemetry.</p>
			</div>
			</div>
				<textarea id = "speech-2271" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-2271">
					<img id="start_img-2271" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-2271">Comment</button>
			<br><div id = "ans-10543"  class = "post">
				<h2>Answer</h2>
			<div id="vote-10543" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">-1</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>Here is a solution for precise (+-2cm) measurement of the copter's position: <a href="https://youtu.be/7CZU8tuqTno" rel="nofollow">https://youtu.be/7CZU8tuqTno</a></p>

<p><p>The data from the copter's position can be fed to the copter's controller using the following interfaces (UART/virtual UART via USB/SPI): <a href="http://marvelmind.com/#Interfaces" rel="nofollow">http://marvelmind.com/#Interfaces</a> - thus eliminating the drift completely.</p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-10543" data-toggle = "popover">
				<p>user name : Marvelmind Robotics</p>
				<p> user reputation : 1</p>
				<p class = "tagcontent" id = "usertaginfo-10543">{'None': -5}</p>
			</div><br><h3>Comments</h3>
				<button data-toggle = 'collapse' data-target = "#commentsection-10543">Load Comments</button></br>
			<div id = "commentsection-10543" class = 'collapse'>
			<div id = "comment-18964" class = "comment">
				<p>Please read [What kind of behavior is expected of users?](http://robotics.stackexchange.com/help/behavior) and [How not to be a spammer](http://robotics.stackexchange.com/help/promotion). The way this was written, it looks less like an answer and more like an advert for your product.</p>
			</div>
			</div>
				<textarea id = "speech-10543" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-10543">
					<img id="start_img-10543" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-10543">Comment</button>
			</div>
			<div id = "resourcestab" class = "resourcestab">
				<ul class="nav nav-tabs">
					<li class="active"><a data-toggle="tab" href="#resources">Resources</a></li>
					<li><a data-toggle="tab" href="#highlights">Highlights</a></li>
				</ul>
					<div class="tab-content">
						<div id="resources" class="tab-pane fade in active">
							<h3>Links from the Page</h3>
							<div id = "resourcescontent"></div>
						</div>
						<div id="highlights" class="tab-pane fade">
							<h3>Highlights</h3>
							<div id = "highlightcontent"></div>
						</div>
			</div>
			</div>
			<footer>Moore & Peps collaboration.</footer>
	</div>
	<script src="/post.js"></script>
	<script type="text/javascript">
		$("#loginmodals").load("/loginModal.html");
		$("#issuemodals").load("/issueModal.html");
		$("#highlight_tool").load("/highlight_tool.html");
		$("#comment_tool").load("/comment_tool.html");
		$("#reward_tool").load("/reward_tool.html");
		checkLoggedInUser()
		var content = $('.content').html();
		populateResources(content)
		getHighlights()
		setOnLinksHover()
	</script>
	<script src="/media.js"></script>
	<script src="/vote.js"></script>
	<script src="/managefunction.js"></script>
	</body>
</html>