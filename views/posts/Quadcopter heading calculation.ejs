<html>
	<head>
		<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="  crossorigin="anonymous"></script>
		<script src = "/jquery-highlight.js"></script>
		<link href="/jquery.upvote.css" rel="stylesheet">
		<script src = "/jquery.upvote.js" type="text/javascript"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="/style.css"/>
		<script src="/createlinks.js"></script>
		<script src="/textaudit.js"></script>
		<script src="/PorterStemmer1980.min.js"></script>
		<script src="/highlight.js"></script>
		<title id = 'pagetitle'>Quadcopter heading calculation
		</title>
	</head>
	<body id = 'pagebody'>
		<div id = "loginmodals"></div>
		<div id = "issuemodals"></div>
		<div id = "highlight_tool"></div>
		<div id = "reward_tool"></div>
		<div id = "comment_tool"></div>
		<div class = "container">
			<header>
				<h1>Just Another Discussion Forum</h1>
			</header>
			<div class="topnav" id="myTopnav">
				<a href="/home">Home</a>
				<a href = "#issueModal" data-toggle="modal" style = "float:right">Report Issue</a>
			</div>
			<div class = "content">
			<div id = "ques-9604" class = "post">
			<h2>Question</h2>
			<div id="vote-9604" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">3</span>
				<a class="downvote"></a>
				<a class="star"></a>
				<p>Views :: 252</p>
			</div>
			<form id = "questionpostsform" method="GET" action = "/ask">
				<input type="submit" id = "quesbtn" class="btn btn-primary btn-lg" value="Ask Question">
			</form>
				<h2>Quadcopter heading calculation</h2>
<p>I'm working on an autonomous quad copter, I have two GPS co-ordinates (source and destination co-ordinates). I need to move my quad from the source to the destination, for this I need to calculate the heading and set the yaw value of my quad. How can I calculate the heading and make sure the quad is headed in the right direction as the target co-ordinates?</p>

<p>If I use magnetometer the declination angle will vary from place to place and so I will have to keep changing the declination angle. If I'm calculating based on just the GPS co-ordinates, it's not accurate. </p>

<p>What is the best way to do this?  How do I calculate the above? </p>

			</div>
			<div class = "userinfosection"  id = "userinfo-9604" data-toggle = "popover">
				<p>user name : hck3r</p>
				<p> user reputation : 21</p>
				<p class = "tagcontent" id = "usertaginfo-9604">{'quadcopter': 4, 'magnetometer': 3, 'None': 0, 'gps': 3}</p>
			</div><br>
			<br><h3>Comments</h3><p>no comments yet<p><br>
			<div id = "commentsection-9604" class = 'collapse'>
			</div>
				<textarea id = "speech-9604" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-9604">
					<img id="start_img-9604" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-9604">Comment</button>

<h1>Answers</h1>
			<br><div id = "ans-9605"  class = "post">
				<h2>Answer</h2>
			<div id="vote-9605" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">2</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>The habitual way to do this is to have an attitude and position loop for the quadrotor, as in next picture.</p>

<p><a href="https://i.stack.imgur.com/M8uE9.jpg" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/M8uE9.jpg" alt="enter image description here"></a></p>

<p>Attitude loop manages the quadrotor to achieve the desired angles (pitch, yaw, and roll). Position circuit on the other hand, calculates which are those desired angles depending on the path you want to follow or the point you want to reach.</p>

<p>One GPS is used for desired position, while your other GPS should be used for actual coordinates.</p>

<p>Have a look at <a href="https://robotics.stackexchange.com/questions/4675/position-controller-for-a-quadrotor">this thread</a> where formulas and expressions are furtherly explained</p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-9605" data-toggle = "popover">
				<p>user name : galtor</p>
				<p> user reputation : 348</p>
				<p class = "tagcontent" id = "usertaginfo-9605">{'control': 2, 'quadcopter': 5, 'None': 14, 'reinforcement-learning': 1, 'pid': 4, 'simulation': -3, 'machine-learning': 1, 'untagged': 0}</p>
			</div><br><h3>Comments</h3><p>no comments yet<p><br>
			<div id = "commentsection-9605" class = 'collapse'>
			</div>
				<textarea id = "speech-9605" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-9605">
					<img id="start_img-9605" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-9605">Comment</button>
			<br><div id = "ans-9611"  class = "post">
				<h2>Answer</h2>
			<div id="vote-9611" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">1</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>A GPS unit doesn't give you heading, although it is possible to estimate the heading based on successive GPS readings. Unless you're looking to <a href="http://images.ridemonkey.com/index.php?size=full&amp;src=http%3A%2F%2Fcdn.swellpath.com%2Fassets%2Fset-it-and-forget-it.png" rel="nofollow">set and forget</a> the heading, which you shouldn't be doing anyways because of wind and other disturbances, you should be using some form of a controller to do course correction along the path. </p>

<p>Say you don't correct for declination and just opt to accept the magnetometer as truth. This will put you on a (slightly) wrong heading for the destination. You <em>should</em> be filtering IMU output with the GPS signal to get a corrected position estimate that reduces drift from the IMU. </p>

<p>So eventually your corrected position updates and "tells" your controller that you're off course, so the flight controller corrects and alters the heading slightly to point at the destination. </p>

<p>This happens continuously, meaning that you'll take a sub-optimal arc instead of a straight line from origin to destination, but unless you're going to <a href="https://en.wikipedia.org/wiki/Magnetic_declination#Air_navigation" rel="nofollow">correct for declination angle</a>, which you seem to not want to do, then there's nothing else really you can do about it. </p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-9611" data-toggle = "popover">
				<p>user name : Chuck</p>
				<p> user reputation : 8534</p>
				<p class = "tagcontent" id = "usertaginfo-9611">{'actuator': 7, 'None': 616, 'dynamics': 7, 'joint': 7}</p>
			</div><br><h3>Comments</h3>
				<button data-toggle = 'collapse' data-target = "#commentsection-9611">Load Comments</button></br>
			<div id = "commentsection-9611" class = 'collapse'>
			<div id = "comment-17052" class = "comment">
				<p>Is that error without the declination angle is negligible ? I'm not using a IMU I'm using K.K board with a raspberry connected to it which will send commands to KK based on the GPS signal. Now I'm planning to interface magnetometer to the raspberry and which should figure out how much yaw should the kk do.</p>
			</div>
			</div>
				<textarea id = "speech-9611" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-9611">
					<img id="start_img-9611" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-9611">Comment</button>
			</div>
			<div id = "resourcestab" class = "resourcestab">
				<ul class="nav nav-tabs">
					<li class="active"><a data-toggle="tab" href="#resources">Resources</a></li>
					<li><a data-toggle="tab" href="#highlights">Highlights</a></li>
				</ul>
					<div class="tab-content">
						<div id="resources" class="tab-pane fade in active">
							<h3>Links from the Page</h3>
							<div id = "resourcescontent"></div>
						</div>
						<div id="highlights" class="tab-pane fade">
							<h3>Highlights</h3>
							<div id = "highlightcontent"></div>
						</div>
			</div>
			</div>
			<footer>Moore & Peps collaboration.</footer>
	</div>
	<script src="/post.js"></script>
	<script type="text/javascript">
		$("#loginmodals").load("/loginModal.html");
		$("#issuemodals").load("/issueModal.html");
		$("#highlight_tool").load("/highlight_tool.html");
		$("#comment_tool").load("/comment_tool.html");
		$("#reward_tool").load("/reward_tool.html");
		checkLoggedInUser()
		var content = $('.content').html();
		populateResources(content)
		getHighlights()
		setOnLinksHover()
	</script>
	<script src="/media.js"></script>
	<script src="/vote.js"></script>
	<script src="/managefunction.js"></script>
	</body>
</html>