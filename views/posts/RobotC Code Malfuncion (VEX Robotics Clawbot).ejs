<html>
	<head>
		<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="  crossorigin="anonymous"></script>
		<script src = "/jquery-highlight.js"></script>
		<link href="/jquery.upvote.css" rel="stylesheet">
		<script src = "/jquery.upvote.js" type="text/javascript"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="/style.css"/>
		<script src="/createlinks.js"></script>
		<script src="/textaudit.js"></script>
		<script src="/PorterStemmer1980.min.js"></script>
		<script src="/highlight.js"></script>
		<title id = 'pagetitle'>RobotC Code Malfuncion (VEX Robotics Clawbot)
		</title>
	</head>
	<body id = 'pagebody'>
		<div id = "loginmodals"></div>
		<div id = "issuemodals"></div>
		<div id = "highlight_tool"></div>
		<div id = "reward_tool"></div>
		<div id = "comment_tool"></div>
		<div class = "container">
			<header>
				<h1>Just Another Discussion Forum</h1>
			</header>
			<div class="topnav" id="myTopnav">
				<a href="/home">Home</a>
				<a href = "#issueModal" data-toggle="modal" style = "float:right">Report Issue</a>
			</div>
			<div class = "content">
			<div id = "ques-12207" class = "post">
			<h2>Question</h2>
			<div id="vote-12207" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">1</span>
				<a class="downvote"></a>
				<a class="star"></a>
				<p>Views :: 25</p>
			</div>
			<form id = "questionpostsform" method="GET" action = "/ask">
				<input type="submit" id = "quesbtn" class="btn btn-primary btn-lg" value="Ask Question">
			</form>
				<h2>RobotC Code Malfuncion (VEX Robotics Clawbot)</h2>
<p>I have a standard VEX Clawbot, which I've been trying to make go straight for some time. </p>

<p>I've been following this guide:
<a href="http://www.education.rec.ri.cmu.edu/products/cortex_video_trainer/lesson/3-5AutomatedStraightening2.html" rel="nofollow noreferrer">http://www.education.rec.ri.cmu.edu/products/cortex_video_trainer/lesson/3-5AutomatedStraightening2.html</a></p>

<p>This is my code:</p>

<pre><code>#pragma config(I2C_Usage, I2C1, i2cSensors)
#pragma config(Sensor, I2C_1,  ,               sensorQuadEncoderOnI2CPort,    , AutoAssign )
#pragma config(Sensor, I2C_2,  ,               sensorQuadEncoderOnI2CPort,    , AutoAssign )
#pragma config(Motor,  port1,           leftMotor,     tmotorVex393_HBridge, openLoop, driveLeft, encoderPort, I2C_1)
#pragma config(Motor,  port10,          rightMotor,    tmotorVex393_HBridge, openLoop, reversed, driveRight, encoderPort, I2C_2)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

void GOforwards()
{
    nMotorEncoder[rightMotor]=0;
    nMotorEncoder[leftMotor]=0;
    int rightEncoder = abs(nMotorEncoder[rightMotor]);
    int leftEncoder = abs(nMotorEncoder[leftMotor]);

    wait1Msec(2000);
    motor[rightMotor] = 60;
    motor[leftMotor] = 60;

    while (rightEncoder &lt; 2000)
    {
        if (rightEncoder &gt; leftEncoder)
        {
            motor[rightMotor] = 50;
            motor[leftMotor] = 60;
        }
        if (rightEncoder &lt; leftEncoder)
        {           
            motor[rightMotor] = 60;
            motor[leftMotor] = 50;
        }
        if (rightEncoder == leftEncoder)
        {
            motor[rightMotor] = 60;
            motor[leftMotor] = 60;
        }
    }
    motor[rightMotor] = 0;
    motor[leftMotor] = 0;
}


task main()
{
GOforwards();
}
</code></pre>

<p>I am using integrated Encoders.</p>

<p>When I run the code my robot runs without stopping and the Encoder values diverge quickly. This is a video of the code running from the debugger windows:</p>

<p><a href="https://www.youtube.com/watch?time_continue=2&amp;v=vs1Cc3xnDtM" rel="nofollow noreferrer">https://www.youtube.com/watch?time_continue=2&amp;v=vs1Cc3xnDtM</a></p>

<p>I am not sure why the power to the wheels never changes, or why it seems to believe that the Encoder values are equal... much less why it runs off into oblivion when the code should exit the while loop once the right encoder's absolute value exceeds 2000.</p>

<p>Any help would be appreciated.</p>

			</div>
			<div class = "userinfosection"  id = "userinfo-12207" data-toggle = "popover">
				<p>user name : nosn</p>
				<p> user reputation : 13</p>
				<p class = "tagcontent" id = "usertaginfo-12207">{'None': 0, 'quadrature-encoder': 1, 'vex': 1, 'mobile-robot': 1, 'robotc': 2, 'movement': 1}</p>
			</div><br>
			<br><h3>Comments</h3><p>no comments yet<p><br>
			<div id = "commentsection-12207" class = 'collapse'>
			</div>
				<textarea id = "speech-12207" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-12207">
					<img id="start_img-12207" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-12207">Comment</button>

<h1>Answers</h1>
			<br><div id = "ans-12210"  class = "post">
				<h2>Answer</h2>
			<div id="vote-12210" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">0</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>It looks like you don't ever update the encoder values after you initialize them. The problem seems to be that maybe you're thinking that the left and right encoder values will update automatically, but that is generally not the case. The exception <em>might</em> be if those variable names are actually protected variable names that have special meaning in your development environment - more on that later. </p>

<p>I don't know about VEX robotics, but I'll caution you that your left and right encoders are based on <code>nMotorEncoder</code> and, just like how <code>leftEncoder</code> and <code>rightEncoder</code> doesn't get updated anywhere in your loop, <strong><code>nMotorEncoder</code> doesn't get updated anywhere either.</strong></p>

<p>So, that said, try using the following:</p>

<pre><code>void GOforwards()
{
    nMotorEncoder[rightMotor]=0;
    nMotorEncoder[leftMotor]=0;
    int rightEncoder = abs(nMotorEncoder[rightMotor]); // &lt;----- Define
    int leftEncoder = abs(nMotorEncoder[leftMotor]);   // &lt;----- Define

    wait1Msec(2000);
    motor[rightMotor] = 60;
    motor[leftMotor] = 60;

    while (rightEncoder &lt; 2000)
    {
        rightEncoder = abs(nMotorEncoder[rightMotor]); // &lt;----- Update
        leftEncoder = abs(nMotorEncoder[leftMotor]);   // &lt;----- Update

        if (rightEncoder &gt; leftEncoder)
        {
            motor[rightMotor] = 50;
            motor[leftMotor] = 60;
        }
        if (rightEncoder &lt; leftEncoder)
        {           
            motor[rightMotor] = 60;
            motor[leftMotor] = 50;
        }
        if (rightEncoder == leftEncoder)
        {
            motor[rightMotor] = 60;
            motor[leftMotor] = 60;
        }
    }
    motor[rightMotor] = 0;
    motor[leftMotor] = 0;
}
</code></pre>

<p>By adding the two lines inside the while loop, now you are checking and updating the encoder counts every time you step into a new loop. This is one of the tricky things with debugging - you have to be looking at the correct variables! In your video, you are looking at <code>leftMotor</code> and <code>rightMotor</code>, and what appears to be fields for those motors. </p>

<p>You were NOT looking at the actual variables that control which case gets selected! Those variables are <code>leftEncoder</code> and <code>rightEncoder</code>. </p>

<p>And again, final warning - it looks like you're counting on things like <code>motor</code> and <code>nMotorEncoder</code> to be function names or keywords that do something, because otherwise it just looks like you enter an infinite loop that never actually writes any values to the motors. </p>

<p>I would have expected something more along the lines of a speed assignment <em>followed by writing that speed to a function</em>, but that second step never happens. For example, I would have thought you'd do something like the following:</p>

<pre><code>motor[leftMotor] = 60;
motor[rightMotor] = 60;
WriteMotorSpeed(motor);
</code></pre>

<p>But that last function, <code>WriteMotorSpeed()</code> never happens. Similarly, there is no <em>function</em> that returns an updated encoder count. Here too it looks like you're expecting the <code>nMotorEncoder</code> variable name to auto-magically update, where I would have expected you to need to call a function that <em>returns</em> an updated value, like the following:</p>

<pre><code>nMotorEncoder = GetEncoderCounts([leftMotor,rightMotor]);
</code></pre>

<p>or something similar. </p>

<p>I could absolutely be wrong; it looks like you're using ROBOTC, and also it's VEX robotics, so there could 100% be a set of pre-defined keywords or key variable names that hold special meaning in that development environment, but again I'm just pointing out what I see versus what I would expect to see. I would <em>highly suggest</em> you check the documentation to see if those values automatically update or if there is, in fact, a function you should be calling to read/write encoder counts and motor speeds. </p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-12210" data-toggle = "popover">
				<p>user name : Chuck</p>
				<p> user reputation : 8534</p>
				<p class = "tagcontent" id = "usertaginfo-12210">{'actuator': 7, 'None': 616, 'dynamics': 7, 'joint': 7}</p>
			</div><br><h3>Comments</h3><p>no comments yet<p><br>
			<div id = "commentsection-12210" class = 'collapse'>
			</div>
				<textarea id = "speech-12210" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-12210">
					<img id="start_img-12210" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-12210">Comment</button>
			</div>
			<div id = "resourcestab" class = "resourcestab">
				<ul class="nav nav-tabs">
					<li class="active"><a data-toggle="tab" href="#resources">Resources</a></li>
					<li><a data-toggle="tab" href="#highlights">Highlights</a></li>
				</ul>
					<div class="tab-content">
						<div id="resources" class="tab-pane fade in active">
							<h3>Links from the Page</h3>
							<div id = "resourcescontent"></div>
						</div>
						<div id="highlights" class="tab-pane fade">
							<h3>Highlights</h3>
							<div id = "highlightcontent"></div>
						</div>
			</div>
			</div>
			<footer>Moore & Peps collaboration.</footer>
	</div>
	<script src="/post.js"></script>
	<script type="text/javascript">
		$("#loginmodals").load("/loginModal.html");
		$("#issuemodals").load("/issueModal.html");
		$("#highlight_tool").load("/highlight_tool.html");
		$("#comment_tool").load("/comment_tool.html");
		$("#reward_tool").load("/reward_tool.html");
		checkLoggedInUser()
		var content = $('.content').html();
		populateResources(content)
		getHighlights()
		setOnLinksHover()
	</script>
	<script src="/media.js"></script>
	<script src="/vote.js"></script>
	<script src="/managefunction.js"></script>
	</body>
</html>