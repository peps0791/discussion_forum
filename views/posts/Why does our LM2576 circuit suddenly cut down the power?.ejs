<html>
	<head>
		<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="  crossorigin="anonymous"></script>
		<script src = "/jquery-highlight.js"></script>
		<link href="/jquery.upvote.css" rel="stylesheet">
		<script src = "/jquery.upvote.js" type="text/javascript"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="/style.css"/>
		<script src="/createlinks.js"></script>
		<script src="/textaudit.js"></script>
		<script src="/PorterStemmer1980.min.js"></script>
		<script src="/highlight.js"></script>
		<title id = 'pagetitle'>Why does our LM2576 circuit suddenly cut down the power?
		</title>
	</head>
	<body id = 'pagebody'>
		<div id = "loginmodals"></div>
		<div id = "issuemodals"></div>
		<div id = "highlight_tool"></div>
		<div id = "comment_tool"></div>
		<div class = "container">
			<header>
				<h1>Just Another Discussion Forum</h1>
			</header>
			<div class="topnav" id="myTopnav">
				<a href="/home">Home</a>
				<a href = "#issueModal" data-toggle="modal" style = "float:right">Report Issue</a>
			</div>
			<div class = "content">
			<div id = "ques-684" class = "post">
			<h2>Question</h2>
			<div id="vote-684" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">6</span>
				<a class="downvote"></a>
				<a class="star"></a>
				<p>Views :: 1567</p>
			</div>
			<form id = "questionpostsform" method="GET" action = "/ask">
				<input type="submit" id = "quesbtn" class="btn btn-primary btn-lg" value="Ask Question">
			</form>
				<h2>Why does our LM2576 circuit suddenly cut down the power?</h2>
<p>I have an LM2576 circuit plus an adjuster to adjust the output voltage, for controlling motor speed in a line follower robot. The circuit works great when adjusted to give out low voltages, but when I adjust it to higher voltages for my motors to go faster, it works great for 1-2 minutes, then suddenly cuts down the power and motors start to go extremely slow.</p>

<p>Even when I decrease or increase the output voltage, it won't respond until I turn off the power and turn it back on again. There is something mentioned in the LM2576 datasheet that if we overload the IC it will cut down the power until the load comes lower, so I think it might be a problem with that.</p>

<p>Since this problem has already caused us to lose the competitions with 5+ teams, I would like to solve it for our next competition, so why does our LM2576 circuit suddenly reduce the power?</p>

			</div>
			<div class = "userinfosection"  id = "userinfo-684" data-toggle = "popover">
				<p>user name : Miro Markaravanes</p>
				<p> user reputation : 323</p>
				<p class = "tagcontent" id = "usertaginfo-684">{'control': 12, 'None': 8, 'i2c': 2, 'motor': 6, 'power': 6, 'pwm': 7, 'microcontroller': 2, 'mechanism': 0, 'avr': 7, 'circuit': -5, 'electronics': 6, 'soccer': 12, 'software': -3}</p>
			</div><br>
			<br><h3>Comments</h3>
				<button data-toggle = 'collapse' data-target = "#commentsection-684">Load Comments</button></br>
			<div id = "commentsection-684" class = 'collapse'>
			<div id = "comment-868" class = "comment">
				<p>I assume you are asking for confirmation of your hypothesis. However it would help if you explicitly asked a question.</p>
			</div>
			</div>
				<textarea id = "speech-684" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-684">
					<img id="start_img-684" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-684">Comment</button>

<h1>Answers</h1>
			<br><div id = "ans-685"  class = "post">
				<h2>Answer</h2>
			<div id="vote-685" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">5</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>According to the <a href="http://www.ti.com/lit/ds/symlink/lm2576.pdf">datasheet</a>, there are three possibilities: TTL shutdown, thermal shutdown and current limiting. </p>

<p>From what I looked up, TTL shutdown means simply that you have a pin you can use to cut-off the regulator output current. My guess is that it is pin 5 and you simply grounded it, as seen in the typical application circuit, so that possibility can be eliminated.</p>

<p>Since the circuit works great for 1-2 minutes and then shuts down, my guess is that you are not properly heatsinking and the regulator is going through thermal shutdown. </p>

<p>If the IC isn't feeling hot enough, however, then you can probably assume current limiting. In that case, you have to investigate why your circuit is demanding so much current (probably a flawed design).</p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-685" data-toggle = "popover">
				<p>user name : georgebrindeiro</p>
				<p> user reputation : 1266</p>
				<p class = "tagcontent" id = "usertaginfo-685">{'computer-vision': 9, 'None': 98, 'slam': 9}</p>
			</div><br><h3>Comments</h3><p>no comments yet<p><br>
			<div id = "commentsection-685" class = 'collapse'>
			</div>
				<textarea id = "speech-685" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-685">
					<img id="start_img-685" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-685">Comment</button>
			<br><div id = "ans-686"  class = "post">
				<h2>Answer</h2>
			<div id="vote-686" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">11</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>If I were you, I would first (1) read the <a href="http://www.onsemi.com/pub_link/Collateral/LM2576-D.PDF" rel="nofollow noreferrer">LM2576 datasheet</a>.
I'm assuming you are using a circuit similar to the schematic and PCB layout on page 23 of the LM2576 datasheet.
I'm guessing you've tweaked the circuit slightly, replacing the manually-operated pot shown on the schematic for R2, replaced with some sort of microprocessor-controlled thing that frequently changes its effective resistance to make that motor spin faster or slower.</p>

<p>Then I would (2) put my finger on the chip.
If it feels so hot that I can't hold my finger on it, I would suspect</p>

<ul>
<li>thermal shutdown.</li>
</ul>

<p>georgebrindeiro covered this. You'll also want to read p. 18 of the datasheet, the section "Thermal Analysis and Design": "The following procedure must be performed to determine whether or not a heatsink will be required. ...". The typical solution is to add a big heat sink to the chip. Do you see the size of the heatsink on the PCB layout on page 23 of the datasheet?</p>

<p>Next I would (3) take a cheap multimeter, switch it to "Amp" mode, and connect it in-line with the motor leads.</p>

<p>When the output voltage drops (which I measure with my more expensive multimeter),
and I hear and see the motors slow down, what does the cheap multimeter say?</p>

<p>Does the cheap multimeter stay pegged at some high current above 3 A (the datasheet says the internal limit will be somewhere between 3.5 A and 7.5 A)?
If so, then we almost certainly have:</p>

<ul>
<li>current limiting. The regulator is working as-designed.</li>
</ul>

<p>The typical solution is to figure out what is pulling so much current, and somehow replace it with something that pulls less current.
Perhaps the robot has run into a wall or got stuck in a rut, and the motors have stalled out.
Then maybe the controller needs to sense this condition, stop its futile efforts to punch through the wall, and reverse direction.</p>

<p>Sometimes we really need more current than one regulator can supply.
Then we must replace that regulator with multiple regulators or higher-current regulators or both.
(But not so much current that it immediately melts the wires in the motor).</p>

<p>On the other hand, if the output voltage <em>and</em> the output current drop, then
I would (4) connect my more expensive multimeter to the power input pins of the regulator.
If that is much lower than I expected, then perhaps:</p>

<ul>
<li>The input voltage is lower than I expected.</li>
</ul>

<p>When you supply the motors with a higher voltage, they drain the batteries much quicker. Partially-drained batteries have a no-load voltage <em>lower</em> than you might expect from the "nominal" voltage printed on the battery, and <em>loaded</em> batteries have an even lower voltage. I doubt this is your problem, since you imply that if you disconnect the battery and reconnect the <em>same</em> battery, it seems to start working again. The typical solution is to put more batteries in series to increase the actual working voltage.</p>

<p>Next I would (5) try disconnecting the batteries, and powering everything from a high-current grid-powered "power supply" set to the appropriate output voltages.
If it seems to run fine off that power supply, but not from batteries, I would suspect:</p>

<ul>
<li>switching-regulator latchup. "Latchup of Constant-Power Load With Current-Limited Source" <a href="http://www.smpstech.com/latch000.htm" rel="nofollow noreferrer">http://www.smpstech.com/latch000.htm</a></li>
</ul>

<p>When you supply the motors with a higher voltage, they pull a higher current.
Surprisingly often, the total impedance at the input power pins of switching regulator is so high (bad) that when the regulator turns its internal power switch on, the voltage at its input power pins plummets so low that it's not possible to pull the desired current from that battery.
Milliseconds later, when the switch turns off, the battery pulls the voltage back up to some reasonable voltage -- so this problem is difficult to debug with a standard multimeter, but obvious when you have the input power pins connected to an oscilloscope.</p>

<p>The only complete cure is to somehow reduce the total input impedance at the input power pins.
Occasionally all you need to do is reduce the wiring impedance -- shorten the wires (reduce the resistance), or bring closer together the PWR and GND wires (reduce the inductance), or both.
Occasionally all you need to do is put more capacitance across the power input pins of the regulator.
As a battery drains, its effective series resistance increases.
In theory, you can always cure this by putting more batteries in parallel to reduce the net ESR of of all the batteries in parallel.</p>

<p>Some people want a very lightweight robot, and so they can't add more batteries, so they can't completely cure the problem.
Sometimes they can get adequate performance from the robot by using various "soft-start" or "load-shedding" techniques.
Rather than trying to pull a lot of power from the batteries to get up to speed quickly -- more power than the battery can physically supply, and so triggering this unwanted latchup -- we pull somewhat less power from the batteries, slowly ramping up to speed, and applying various "limp mode" and "tired mode" techniques to keep the total power at any one instant low enough that the battery can supply it.
(You may be interested in
<a href="https://robotics.stackexchange.com/questions/416/what-is-the-best-way-to-power-a-large-number-27-servos-at-5-v">What is the best way to power a large number (27) servos at 5 V?</a>
).</p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-686" data-toggle = "popover">
				<p>user name : David Cary</p>
				<p> user reputation : 3365</p>
				<p class = "tagcontent" id = "usertaginfo-686">{'quadcopter': 38, 'stepper-driver': 9, 'None': 256, 'multi-rotor': 2, 'force-sensor': 9, 'stability': 36, 'industrial-robot': 1, 'design': 18, 'motor': 2, 'stepper-motor': 9}</p>
			</div><br><h3>Comments</h3>
				<button data-toggle = 'collapse' data-target = "#commentsection-686">Load Comments</button></br>
			<div id = "commentsection-686" class = 'collapse'>
			<div id = "comment-872" class = "comment">
				<p>+1 Excellent. You literally said everything (and more) that I was about to write... ;-)</p>
			</div>
			<div id = "comment-877" class = "comment">
				<p>More than I was expecting as an answer:) thx..</p>
			</div>
			<div id = "comment-878" class = "comment">
				<p>And the thing I want to add is, that I use the circuit the same as the datasheet and with that manual pot and I don't use batteries.. my motors only take up to 2A currents, so I don't think it will be a current limit issue. What I think is that it might be a thermal shutdown issue as you covered already. Anyway I put some 4700uF caps between the input pins and it seemed to have solved the problem partially.</p>
			</div>
			<div id = "comment-906" class = "comment">
				<p>Just how hot can the LM2576 get before it thermal shutdown kicks in? Might it be beter to feel near it ratger than touch it in the first instance?</p>
			</div>
			<div id = "comment-918" class = "comment">
				<p>I'd like to see the final diagnosis listed here in the comments (if it was indeed related to thermal shutdown) as well as the modifications that fixed the problem.  Problems like this are extremely frustrating, so hopefully it will save someone some trouble down the road.  Or at the very least, bring a frantic google search to an end.</p>
			</div>
			</div>
				<textarea id = "speech-686" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-686">
					<img id="start_img-686" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-686">Comment</button>
			</div>
			<div id = "resourcestab" class = "resourcestab">
				<ul class="nav nav-tabs">
					<li class="active"><a data-toggle="tab" href="#resources">Resources</a></li>
					<li><a data-toggle="tab" href="#summary">Summary</a></li>
					<li><a data-toggle="tab" href="#highlights">Highlights</a></li>
				</ul>
					<div class="tab-content">
						<div id="resources" class="tab-pane fade in active">
							<h3>Links from the Page</h3>
							<div id = "resourcescontent"></div>
						</div>
						<div id="summary" class="tab-pane fade">
							<h3>Summary</h3>
							<div id = "summarycontent"></div>
						</div>
						<div id="highlights" class="tab-pane fade">
							<h3>Highlights</h3>
							<div id = "highlightcontent"></div>
						</div>
			</div>
			</div>
			<footer>Moore & Peps collaboration.</footer>
	</div>
	<script src="/post.js"></script>
	<script type="text/javascript">
		$("#loginmodals").load("/loginModal.html");
		$("#issuemodals").load("/issueModal.html");
		$("#highlight_tool").load("/highlight_tool.html");
		$("#comment_tool").load("/comment_tool.html");
		checkLoggedInUser()
		var content = $('.content').html();
		populateResources(content)
		getHighlights()
		setOnLinksHover()
	</script>
	<script src="/media.js"></script>
	<script src="/vote.js"></script>
	<script src="/managefunction.js"></script>
	</body>
</html>