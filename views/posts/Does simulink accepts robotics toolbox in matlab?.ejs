<html>
	<head>
		<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="  crossorigin="anonymous"></script>
		<script src = "/jquery-highlight.js"></script>
		<link href="/jquery.upvote.css" rel="stylesheet">
		<script src = "/jquery.upvote.js" type="text/javascript"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="/style.css"/>
		<script src="/createlinks.js"></script>
		<script src="/textaudit.js"></script>
		<script src="/PorterStemmer1980.min.js"></script>
		<script src="/highlight.js"></script>
		<title id = 'pagetitle'>Does simulink accepts robotics toolbox in matlab?
		</title>
	</head>
	<body id = 'pagebody'>
		<div id = "loginmodals"></div>
		<div id = "issuemodals"></div>
		<div id = "highlight_tool"></div>
		<div class = "container">
			<header>
				<h1>Just Another Discussion Forum</h1>
			</header>
			<div class="topnav" id="myTopnav">
				<a href="/home">Home</a>
				<a href = "#issueModal" data-toggle="modal" style = "float:right">Report Issue</a>
			</div>
			<div class = "content">
			<div id = "ques-11165" class = "post">
			<h2>Question</h2>
			<div id="vote-11165" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">0</span>
				<a class="downvote"></a>
				<a class="star"></a>
				<p>Views :: 200</p>
			</div>
			<form id = "questionpostsform" method="GET" action = "/ask">
				<input type="submit" id = "quesbtn" class="btn btn-primary btn-lg" value="Ask Question">
			</form>
				<h2>Does simulink accepts robotics toolbox in matlab?</h2>
<p>I'm trying to make a model for a robotic arm on simulink and then excute it on arduino controller but i want also to use robotics toolbox to calculate forward and inverse kinematics so i need to add matlab function in my simulink model i tried it but it keeps giving errors but when i try it away from simulink it gives rsults ! is that because robotics toolbox works only with matlab but not with simulink? </p>

<p><a href="https://i.stack.imgur.com/rA0mc.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/rA0mc.png" alt="my simulink model"></a></p>

<p>the code in matlab function</p>

<pre><code> function [theta1, theta2, theta3, theta4] = fcn(x, z, y)


L(1)=Link([0,0.03,0,pi/2,0]);
L(2)=Link([0,0,0.12,0,0]);
L(3)=Link([0,0,0.1,-pi/2,0]);
L(4)=Link([0,0,0,0,0]);
robot = SerialLink(L,'name','robot');

robot.tool=transl(0,0,.08);
robot.base=transl(0,0,.07);


    T=transl(x,y,z);
    q=robot.ikine(T,[0,0,0,0], [1 1 1 0 0 1]);
    q(1)=fix(q(1)*(180/pi));
   q(2)=fix(q(2)*(180/pi));
    q(3)=fix(q(3)*(180/pi));
    q(4)=fix(q(4)*(180/pi));

          theta1=q(1)
    theta2=q(2)
    theta3=q(3)
    theta4=q(4)
</code></pre>

<p><a href="https://i.stack.imgur.com/exqOz.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/exqOz.png" alt="errors when excuting"></a></p>

<p>but when i try it in command window away from simulink it gives results for x=1 y=1 z=1 and higher values</p>

<pre><code>   Warning: solution diverging at step 245, try reducing alpha 
 &gt; In SerialLink/ikine (line 260) 
  Warning: solution diverging at step 459, try reducing alpha 
 &gt; In SerialLink/ikine (line 260) 
 Warning: solution diverging at step 533, try reducing alpha 
 &gt; In SerialLink/ikine (line 260) 
 Warning: ikine: iteration limit 1000 exceeded (row 1), final err 1.790820 
 &gt; In SerialLink/ikine (line 179) 

 theta1 =

  -21996


theta2 =

-1050694


theta3 =

 2711696


theta4 =

 2848957
</code></pre>

<p>but for x=0.2  y=0.2 z=0.2 it gives that error</p>

<pre><code>      .
      .
      .
      .
&gt; In SerialLink/ikine (line 260) 
Warning: solution diverging at step 567, try reducing alpha 
&gt; In SerialLink/ikine (line 260) 
Warning: solution diverging at step 570, try reducing alpha 
&gt; In SerialLink/ikine (line 260) 
Warning: solution diverging at step 574, try reducing alpha 
&gt; In SerialLink/ikine (line 260) 
Warning: solution diverging at step 578, try reducing alpha 
&gt; In SerialLink/ikine (line 260) 
Error using tr2angvec (line 97)
matrix not orthonormal rotation matrix

Error in SerialLink/ikine (line 191)
        [th,n] = tr2angvec(Rq'*t2r(T));
</code></pre>

			</div>
			<div class = "userinfosection"  id = "userinfo-11165" data-toggle = "popover">
				<p>user name : mr.Arrow</p>
				<p> user reputation : 6</p>
				<p class = "tagcontent" id = "usertaginfo-11165">{'None': 0, 'manipulator': 0, 'arduino': 1, 'simulator': 0, 'servomotor': 0, 'matlab': 1, 'robotic-arm': 0}</p>
			</div><br>
			<br><h3>Comments</h3><p>no comments yet<p><br>
			<div id = "commentsection-11165" class = 'collapse'>
			</div>
				<textarea id = "speech-11165" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-11165">
					<img id="start_img-11165" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-11165">Comment</button>

<h1>Answers</h1>
			<br><div id = "ans-11166"  class = "post">
				<h2>Answer</h2>
			<div id="vote-11166" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">3</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>You aren't using the <a href="https://www.mathworks.com/products/robotics/" rel="nofollow noreferrer">Matlab Robotics System Toolbox</a>. Commands like <code>Link</code>, <code>transl</code>, and <code>SerialLink</code> aren't any of the <a href="https://www.mathworks.com/help/robotics/functionlist.html?s_cid=doc_ftr" rel="nofollow noreferrer">functions included in that toolbox</a>. </p>

<p>You appear to be using a third-party toolbox, the <a href="http://petercorke.com/Robotics_Toolbox.html" rel="nofollow noreferrer">Robotics Toolbox</a>. It's not an official toolbox, and even the toolbox's creator states, "<strong>Support</strong> - There is no support!". If it's not running in Simulink, then it might not run in Simulink. If you want something that does, try the <em>official</em> toolbox. Mathworks generally offers trials of all their toolboxes. </p>

<p>Your first error, "Simulink does not have enough information to determine the output size of this block," can typically be solved by initializing the variables before assignment and/or by setting their size in the properties menu for the function block (as opposed to leaving it set as "inherited"). </p>

<p>That said, I'd like to point out that your results are <em>not correct</em> and you are get a lot of bad warnings that you seem to be ignoring when you show that it "works" when you're not using Simulink. </p>

<p>Diverging solutions mean something is wrong, iteration limits being exceeded mean something is wrong, and <em>did you even look at the numbers you were given?</em> </p>

<p>What does it mean to you when the output you're getting is something like <code>theta4 = 2848957</code>?? Does 2.8 million radians (or even degrees) seem like a quality answer? I'll again point out that you're using a third party toolbox, and the website advertises it's "Tested with Matlab R2011a" - this shouldn't be inspiring confidence; I'm currently using Matlab R2016b.</p>

<p>My advice would be to ditch that toolbox and get one with official support. If you're going to insist on using it with Simulink, at least make sure you're getting correct answers first.</p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-11166" data-toggle = "popover">
				<p>user name : Chuck</p>
				<p> user reputation : 8534</p>
				<p class = "tagcontent" id = "usertaginfo-11166">{'actuator': 7, 'None': 616, 'dynamics': 7, 'joint': 7}</p>
			</div><br><h3>Comments</h3><p>no comments yet<p><br>
			<div id = "commentsection-11166" class = 'collapse'>
			</div>
				<textarea id = "speech-11166" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-11166">
					<img id="start_img-11166" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-11166">Comment</button>
			</div>
			<div id = "resourcestab" class = "resourcestab">
				<ul class="nav nav-tabs">
					<li class="active"><a data-toggle="tab" href="#resources">Resources</a></li>
					<li><a data-toggle="tab" href="#summary">Summary</a></li>
				</ul>
					<div class="tab-content">
						<div id="resources" class="tab-pane fade in active">
							<h3>Resources</h3>
							<div id = "resourcescontent"></div>
						</div>
						<div id="summary" class="tab-pane fade">
							<h3>Summary</h3>
							<div id = "summarycontent"></div>
						</div>
			</div>
			</div>
			<footer>Moore & Peps collaboration.</footer>
	</div>
	<script src="/post.js"></script>
	<script type="text/javascript">
		$("#loginmodals").load("/loginModal.html");
		$("#issuemodals").load("/issueModal.html");
		$("#highlight_tool").load("/highlight_tool.html");
		checkLoggedInUser()
		var content = $('.content').html();
		populateResources(content)
		getHighlights()
		setOnLinksHover()
	</script>
	<script src="/media.js"></script>
	<script src="/vote.js"></script>
	<script src="/managefunction.js"></script>
	</body>
</html>