<html>
	<head>
		<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="  crossorigin="anonymous"></script>
		<script src = "/jquery-highlight.js"></script>
		<link href="/jquery.upvote.css" rel="stylesheet">
		<script src = "/jquery.upvote.js" type="text/javascript"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="/style.css"/>
		<script src="/createlinks.js"></script>
		<script src="/textaudit.js"></script>
		<script src="/PorterStemmer1980.min.js"></script>
		<script src="/highlight.js"></script>
		<title id = 'pagetitle'>Confusion about order of homogeneous transform multiplication
		</title>
	</head>
	<body id = 'pagebody'>
		<div id = "loginmodals"></div>
		<div id = "issuemodals"></div>
		<div id = "highlight_tool"></div>
		<div class = "container">
			<header>
				<h1>Just Another Discussion Forum</h1>
			</header>
			<div class="topnav" id="myTopnav">
				<a href="/home">Home</a>
				<a href = "#issueModal" data-toggle="modal" style = "float:right">Report Issue</a>
			</div>
			<div class = "content">
			<div id = "ques-12432" class = "post">
			<h2>Question</h2>
			<div id="vote-12432" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">1</span>
				<a class="downvote"></a>
				<a class="star"></a>
				<p>Views :: 60</p>
			</div>
			<form id = "questionpostsform" method="GET" action = "/ask">
				<input type="submit" id = "quesbtn" class="btn btn-primary btn-lg" value="Ask Question">
			</form>
				<h2>Confusion about order of homogeneous transform multiplication</h2>
<p><em>This is my first post here, so if I unknowingly vioated any rules, mods are welcome to edit my post accordingly.</em><br>
Ok, so my problem is that following Craig's conventions, I can't seem to find the expected homogeneous transform after a series of transformations.<br>
I have included the image for clarity.</p>

<p>We are given the initial frame {0} as usual and then:<br>
-$\{A\}$ is the frame under rotating {0} $90^\circ$ around $z$ and translating, with $OA = \begin{bmatrix}
1
\\ 1
\\ 1
\end{bmatrix}$<br>
-$\{B\}$ is obtained after translating $A$ by $AB = \begin{bmatrix}
-2
\\ -2
\\ 0
\end{bmatrix}$ <br>
<strong>What I found is:</strong> <br> 
$$ {}_A^OT = \left[ {\begin{array}{*{20}{c}}
0&amp;-1&amp;0&amp;1\\
1&amp;0&amp;0&amp;1\\
0&amp;0&amp;1&amp;{1}\\
0&amp;0&amp;0&amp;1
\end{array}} \right], \;\;{}_B^AT=\left[ {\begin{array}{*{20}{c}}
1&amp;0&amp;0&amp;-2\\
0&amp;1&amp;0&amp;-2\\
0&amp;0&amp;1&amp;{0}\\
0&amp;0&amp;0&amp;1
\end{array}} \right],\\ {}_B^OT = {}_A^OT  {}_B^AT=\left[ {\begin{array}{*{20}{c}}
0&amp;-1&amp;0&amp;3\\
1&amp;0&amp;0&amp;-1\\
0&amp;0&amp;1&amp;{1}\\
0&amp;0&amp;0&amp;1
\end{array}} \right] $$
<strong>This is wrong, since the last column should obviously have the coordinates $-1,-1,1$, the origin of B</strong><br>
What am I missing? <br>
<a href="https://i.stack.imgur.com/kpdEY.jpg" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/kpdEY.jpg" alt="series of transformations"></a></p>

			</div>
			<div class = "userinfosection"  id = "userinfo-12432" data-toggle = "popover">
				<p>user name : alet</p>
				<p> user reputation : 8</p>
				<p class = "tagcontent" id = "usertaginfo-12432">{'None': 0, 'kinematics': 1, 'frame': 1}</p>
			</div><br>
			<br><h3>Comments</h3><p>no comments yet<p><br>
			<div id = "commentsection-12432" class = 'collapse'>
			</div>
				<textarea id = "speech-12432" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-12432">
					<img id="start_img-12432" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-12432">Comment</button>

<h1>Answers</h1>
			<br><div id = "ans-12437"  class = "post">
				<h2>Answer</h2>
			<div id="vote-12437" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">0</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>In order to find the correct translation you need to rotate the origin of frame B by $^{A}_{B}{R}$ and then add the origin of frame A. Check eq. 2.41 page 35 of Craig's <a href="http://www.mech.sharif.ir/c/document_library/get_file?uuid=5a4bb247-1430-4e46-942c-d692dead831f&amp;groupId=14040" rel="nofollow noreferrer">Introduction to Robotics</a></p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-12437" data-toggle = "popover">
				<p>user name : Dimis</p>
				<p> user reputation : 98</p>
				<p class = "tagcontent" id = "usertaginfo-12437">{'None': 5, 'jacobian': 3}</p>
			</div><br><h3>Comments</h3>
				<button data-toggle = 'collapse' data-target = "#commentsection-12437">Load Comments</button></br>
			<div id = "commentsection-12437" class = 'collapse'>
			<div id = "comment-21885" class = "comment">
				<p>It would be great if you could duplicate that equation here, for those that don't have access to the book.</p>
			</div>
			</div>
				<textarea id = "speech-12437" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-12437">
					<img id="start_img-12437" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-12437">Comment</button>
			<br><div id = "ans-12439"  class = "post">
				<h2>Answer</h2>
			<div id="vote-12439" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">0</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>It is the <em>order</em> of multiplication.</p>

<p>Suppose you have a frame $A$ and you want to apply the transformation $T_B$ to $A$:</p>

<ul>
<li>If $T_B$ is described in the <em>global</em> frame, you <strong>pre-multiply</strong> $T_A$ with $T_B$. This is your desired solution: you want to translate $A$ by $(-2, -2, 0)$, i.e., $-2$ in the world's $x$-direction and $-2$ in the world's $y$-direction.</li>
<li>If $T_B$ is described in the $A$ frame, you <strong>post-multiply</strong> $T_A$ with $T_B$. This is what you did.</li>
</ul>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-12439" data-toggle = "popover">
				<p>user name : Petch Puttichai</p>
				<p> user reputation : 570</p>
				<p class = "tagcontent" id = "usertaginfo-12439">{'None': 29, 'manipulator': 6, 'inverse-kinematics': 0, 'industrial-robot': 6, 'redundant-robots': 0, 'kinematics': 3, 'robotic-arm': 6, 'singularity': 3}</p>
			</div><br><h3>Comments</h3><p>no comments yet<p><br>
			<div id = "commentsection-12439" class = 'collapse'>
			</div>
				<textarea id = "speech-12439" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-12439">
					<img id="start_img-12439" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-12439">Comment</button>
			<br><div id = "ans-12443"  class = "post">
				<h2>Answer</h2>
			<div id="vote-12443" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">3</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>The mistake is in the second matrix $T_B$ in the last column<br>
this column means that you want to transfer the Frame by -2 in <strong><em>it's</em></strong> X direction and by -2 in <strong><em>it's</em></strong> Y direction which in your case is like this:<br>
The X vector of the second Frame <strong>(A-Frame)</strong> is the Y Vector of the world Frame <strong>(O-Frame)</strong><br>
The Y vector of the second Frame <strong>(A-Frame)</strong> is the opposite of X Vector of the world Frame <strong>(O-Frame)</strong><br>
so if you want to transfer the new Frame by (-2, -2, 0) according to the world Frame you need to transfer it by (-2, 2, 0) according to the new Frame.. so the last column in the second matrix needs to be (-2, 2, 0, 1)<br>
in this case the last column of the total matrix will be as you expected (-1, -1, 1, 1)    </p>

<p><strong>in general</strong> you need to write the transferring vector always in the last frame coordinates, so you need to apply all the previous transformations on it before you use it in the new transfer matrix<br>
you need to multiply the (-2, -2, 0) vector by the inverse of first rotating matrix $T_A$ which is ($T_A^T$)  and you will get the new transferring vector (-2, 2, 0) </p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-12443" data-toggle = "popover">
				<p>user name : Ghadeer Elmkaiel</p>
				<p> user reputation : 73</p>
				<p class = "tagcontent" id = "usertaginfo-12443">{'quadcopter': 0, 'None': 4}</p>
			</div><br><h3>Comments</h3>
				<button data-toggle = 'collapse' data-target = "#commentsection-12443">Load Comments</button></br>
			<div id = "commentsection-12443" class = 'collapse'>
			<div id = "comment-21891" class = "comment">
				<p>Yes, that's it! The thing is, I considered the translation vector AB, but this was essentialy referenced to {0}. Instead the general formula that can be applied, is off course, (A)Borg=T(AO)*((O)Borg)</p>
			</div>
			</div>
				<textarea id = "speech-12443" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-12443">
					<img id="start_img-12443" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-12443">Comment</button>
			</div>
			<div id = "resourcestab" class = "resourcestab">
				<ul class="nav nav-tabs">
					<li class="active"><a data-toggle="tab" href="#resources">Resources</a></li>
					<li><a data-toggle="tab" href="#summary">Summary</a></li>
				</ul>
					<div class="tab-content">
						<div id="resources" class="tab-pane fade in active">
							<h3>Resources</h3>
							<div id = "resourcescontent"></div>
						</div>
						<div id="summary" class="tab-pane fade">
							<h3>Summary</h3>
							<div id = "summarycontent"></div>
						</div>
			</div>
			</div>
			<footer>Moore & Peps collaboration.</footer>
	</div>
	<script src="/post.js"></script>
	<script type="text/javascript">
		$("#loginmodals").load("/loginModal.html");
		$("#issuemodals").load("/issueModal.html");
		$("#highlight_tool").load("/highlight_tool.html");
		checkLoggedInUser()
		var content = $('.content').html();
		populateResources(content)
		getHighlights()
		setOnLinksHover()
	</script>
	<script src="/media.js"></script>
	<script src="/vote.js"></script>
	<script src="/managefunction.js"></script>
	</body>
</html>