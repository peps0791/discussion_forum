<html>
	<head>
		<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="  crossorigin="anonymous"></script>
		<script src = "/jquery-highlight.js"></script>
		<link href="/jquery.upvote.css" rel="stylesheet">
		<script src = "/jquery.upvote.js" type="text/javascript"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="/style.css"/>
		<script src="/createlinks.js"></script>
		<script src="/textaudit.js"></script>
		<script src="/PorterStemmer1980.min.js"></script>
		<script src="/highlight.js"></script>
		<title id = 'pagetitle'>Connecting two microcontrollers using I2C
		</title>
	</head>
	<body id = 'pagebody'>
		<div id = "loginmodals"></div>
		<div id = "issuemodals"></div>
		<div id = "highlight_tool"></div>
		<div class = "container">
			<header>
				<h1>Just Another Discussion Forum</h1>
			</header>
			<div class="topnav" id="myTopnav">
				<a href="/home">Home</a>
				<a href = "#issueModal" data-toggle="modal" style = "float:right">Report Issue</a>
			</div>
			<div class = "content">
			<div id = "ques-131" class = "post">
			<h2>Question</h2>
			<div id="vote-131" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">2</span>
				<a class="downvote"></a>
				<a class="star"></a>
				<p>Views :: 511</p>
			</div>
			<form id = "questionpostsform" method="GET" action = "/ask">
				<input type="submit" id = "quesbtn" class="btn btn-primary btn-lg" value="Ask Question">
			</form>
				<h2>Connecting two microcontrollers using I2C</h2>
<p>I Have an ATmega16 mc which is master on the i2c and a ATMega8 mc which is slave on the i2c.</p>

<p>I have connected the two mcs' sda and scl ports to each other alongside a pullup resistor.</p>

<p>Now I want to read a register from the ATMega8 using the ATMega16. </p>

<p>The problem is that I don't want to assign all the variables manually. Is there any libs or headers that will do this thing for me?</p>

			</div>
			<div class = "userinfosection"  id = "userinfo-131" data-toggle = "popover">
				<p>user name : Miro Markaravanes</p>
				<p> user reputation : 323</p>
				<p class = "tagcontent" id = "usertaginfo-131">{'control': 12, 'None': 8, 'i2c': 2, 'motor': 6, 'power': 6, 'pwm': 7, 'microcontroller': 2, 'mechanism': 0, 'avr': 7, 'circuit': -5, 'electronics': 6, 'soccer': 12, 'software': -3}</p>
			</div><br>
			<br><h3>Comments</h3>
				<button data-toggle = 'collapse' data-target = "#commentsection-131">Load Comments</button></br>
			<div id = "commentsection-131" class = 'collapse'>
			<div id = "comment-143" class = "comment">
				<p>Belongs on EE SE</p>
			</div>
			<div id = "comment-145" class = "comment">
				<p>If you were to rephrase the question as "I've set up my registers as follows {...} but still can't get it to work..." we might be able to help a bit more</p>
			</div>
			<div id = "comment-162" class = "comment">
				<p>I wouldn't be too strict on the border to other fields. If you strip robotics of Electrical, Mechanical and Software Engineering, there isn't anything left.</p>
			</div>
			<div id = "comment-193" class = "comment">
				<p>Remember that just because a question is closed, doesn't mean that it has to stay closed. If this can be made more relevant to future `robotics` visitors, it could still be reopened.</p>
			</div>
			</div>
				<textarea id = "speech-131" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-131">
					<img id="start_img-131" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-131">Comment</button>

<h1>Answers</h1>
			<br><div id = "ans-133"  class = "post">
				<h2>Answer</h2>
			<div id="vote-133" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">1</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>I've not used the ATMega family, but have lots of experience of configuring many other devices - setting up the control registers for I2C is usually pretty straight forward, with appropriate reference to the datasheet/user-manual and will help you understand what's going on.</p>

<p>For such tasks, a library is (a) inefficient (b) overkill and (c) doesn't help you learn. </p>

<p>I don't know if there is one, but wouldn't recommend you use it, if there was...</p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-133" data-toggle = "popover">
				<p>user name : Andrew</p>
				<p> user reputation : 570</p>
				<p class = "tagcontent" id = "usertaginfo-133">{'None': 41}</p>
			</div><br><h3>Comments</h3>
				<button data-toggle = 'collapse' data-target = "#commentsection-133">Load Comments</button></br>
			<div id = "commentsection-133" class = 'collapse'>
			<div id = "comment-161" class = "comment">
				<p>I don't think this is very good advice. If there are good firmware libraries available for a Microcontroller I would always recommend to use them. They usually make for more structured code that is much easier to read and takes less time to write. So (a) inefficient is irrelevant at setup time, (b) it helps you learn as you see how its properly done when you browse the library code.</p>
			</div>
			<div id = "comment-163" class = "comment">
				<p>Hi Jakob... only giving my opinion :) And how many people bother to look at the library code? Few even manage to RTFM!  For some aspects (eg USB, ethernet) there are standard protocols to follow... for I2C/SPI (and even RS232) there are not so a general purpose library cannot be efficient.</p>
			</div>
			<div id = "comment-194" class = "comment">
				<p>I fail to see how [RTFM](http://en.wikipedia.org/wiki/RTFM) is a very good answer on stack exchange and then to add in some unrelated bias about libraries gets you a 'not useful' vote from me I'm afraid. Sorry.</p>
			</div>
			</div>
				<textarea id = "speech-133" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-133">
					<img id="start_img-133" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-133">Comment</button>
			<br><div id = "ans-145"  class = "post">
				<h2>Answer</h2>
			<div id="vote-145" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">2</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>AVR publishes a set of guides for every microcontroller they make. See <a href="http://www.atmel.com/devices/atmega16.aspx?tab=documents" rel="nofollow noreferrer">http://www.atmel.com/devices/atmega16.aspx?tab=documents</a>, and obtain the <strong>ATmega16(L) Complete</strong> document.</p>

<p>You will find a chapter dedicated to I2C (it is named <strong>2-wire Serial Interface (TWI)</strong>). While there may be libraries, the general practice is to set the appropriate registers manually.</p>

<p>Each register is given a name (all caps, like a constant) - an 8-bit integer you can set in C. Specific bits will be used to set one microcontroller as a master or slave. For example, the following registers are relevant to the two-wire interface.</p>

<h1>TWI Register Description</h1>

<ul>
<li><strong>TWI Bit Rate Register   TWBR</strong>

<ul>
<li>Bits 7...0   TWI Bit Rate Register</li>
</ul></li>
<li><strong>TWI Control Register   TWCR</strong>

<ul>
<li>Bit 7   TWINT: TWI Interrupt Flag</li>
<li>Bit 6   TWEA: TWI Enable Acknowledge Bit</li>
<li>Bit 5   TWSTA: TWI START Condition Bit</li>
<li>Bit 4   TWSTO: TWI STOP Condition Bit</li>
<li>Bit 3   TWWC: TWI Write Collision Flag</li>
<li>Bit 2   TWEN: TWI Enable Bit</li>
<li>Bit 1   Res: Reserved Bit</li>
<li>Bit 0   TWIE: TWI Interrupt Enable</li>
</ul></li>
<li><strong>TWI Status Register   TWSR</strong></li>
<li><strong>TWI Data Register   TWDR</strong></li>
<li><strong>TWI (Slave) Address Register   TWAR</strong></li>
</ul>

<p>Note that you set certain bits to specify bit rate, the data to transfer, the address a slave responds to, and when to start/stop transfers (the control register). You can also obtain the status of transmissions from the status register.</p>

<p>The document will also walk you through the steps to use it:</p>

<p><img src="https://i.stack.imgur.com/rS9Ns.png" alt="enter image description here">
<em>Obtained from the AVR "ATmega16(L) Complete" document</em></p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-145" data-toggle = "popover">
				<p>user name : ronalchn</p>
				<p> user reputation : 2449</p>
				<p class = "tagcontent" id = "usertaginfo-145">{'None': 187, 'two-wheeled': 20, 'inverse-kinematics': 15, 'interrupts': 5, 'microcontroller': 13, 'wiring': 7, 'c': 8, 'avr': 5, 'brushless-motor': 2, 'joint': 15, 'kinematics': 15, 'hall-sensor': 2, 'mobile-robot': 20, 'arm': 15}</p>
			</div><br><h3>Comments</h3><p>no comments yet<p><br>
			<div id = "commentsection-145" class = 'collapse'>
			</div>
				<textarea id = "speech-145" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-145">
					<img id="start_img-145" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-145">Comment</button>
			<br><div id = "ans-151"  class = "post">
				<h2>Answer</h2>
			<div id="vote-151" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">3</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>It's been a while since I've used the AVR, but there where two libraries which would do what you are looking for. Unfortunately ATMEL doesn't provide proper firmware libraries themselves (as e.g. STM does).</p>

<ul>
<li><p><a href="http://www.procyonengineering.com/embedded/avr/avrlib/" rel="nofollow">Procyon AVRlib</a> is quite outdated, but also very lightweight. You can just use the parts that you are interested in.</p></li>
<li><p><a href="http://www.nongnu.org/avr-libc/" rel="nofollow">AVR Libc</a> is another library which is slightly more recent and in my experience quite comprehensive. I think it is actually bundled with a lot of toolchains.</p></li>
</ul>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-151" data-toggle = "popover">
				<p>user name : Jakob</p>
				<p> user reputation : 2519</p>
				<p class = "tagcontent" id = "usertaginfo-151">{'ransac': 3, 'None': 210, 'computer-vision': 1, 'cameras': 1, 'c++': 3, 'slam': 12, 'rock': 1, 'i2c': 3, 'servos': 3, 'software': 1}</p>
			</div><br><h3>Comments</h3>
				<button data-toggle = 'collapse' data-target = "#commentsection-151">Load Comments</button></br>
			<div id = "commentsection-151" class = 'collapse'>
			<div id = "comment-166" class = "comment">
				<p>Thanks for the links... notwithstanding my answer, I'll have a look see :)</p>
			</div>
			</div>
				<textarea id = "speech-151" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-151">
					<img id="start_img-151" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-151">Comment</button>
			</div>
			<div id = "resourcestab" class = "resourcestab">
				<ul class="nav nav-tabs">
					<li class="active"><a data-toggle="tab" href="#resources">Resources</a></li>
					<li><a data-toggle="tab" href="#summary">Summary</a></li>
				</ul>
					<div class="tab-content">
						<div id="resources" class="tab-pane fade in active">
							<h3>Resources</h3>
							<div id = "resourcescontent"></div>
						</div>
						<div id="summary" class="tab-pane fade">
							<h3>Summary</h3>
							<div id = "summarycontent"></div>
						</div>
			</div>
			</div>
			<footer>Moore & Peps collaboration.</footer>
	</div>
	<script src="/post.js"></script>
	<script type="text/javascript">
		$("#loginmodals").load("/loginModal.html");
		$("#issuemodals").load("/issueModal.html");
		$("#highlight_tool").load("/highlight_tool.html");
		checkLoggedInUser()
		var content = $('.content').html();
		populateResources(content)
		getHighlights()
		setOnLinksHover()
	</script>
	<script src="/media.js"></script>
	<script src="/vote.js"></script>
	<script src="/managefunction.js"></script>
	</body>
</html>