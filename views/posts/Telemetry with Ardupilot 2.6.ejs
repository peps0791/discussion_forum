<html>
	<head>
		<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="  crossorigin="anonymous"></script>
		<script src = "/jquery-highlight.js"></script>
		<link href="/jquery.upvote.css" rel="stylesheet">
		<script src = "/jquery.upvote.js" type="text/javascript"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="/style.css"/>
		<script src="/createlinks.js"></script>
		<script src="/textaudit.js"></script>
		<script src="/PorterStemmer1980.min.js"></script>
		<script src="/highlight.js"></script>
		<title id = 'pagetitle'>Telemetry with Ardupilot 2.6
		</title>
	</head>
	<body id = 'pagebody'>
		<div id = "loginmodals"></div>
		<div id = "issuemodals"></div>
		<div id = "highlight_tool"></div>
		<div class = "container">
			<header>
				<h1>Just Another Discussion Forum</h1>
			</header>
			<div class="topnav" id="myTopnav">
				<a href="/home">Home</a>
				<a href = "#issueModal" data-toggle="modal" style = "float:right">Report Issue</a>
			</div>
			<div class = "content">
			<div id = "ques-2021" class = "post">
			<h2>Question</h2>
			<div id="vote-2021" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">3</span>
				<a class="downvote"></a>
				<a class="star"></a>
				<p>Views :: 2899</p>
			</div>
			<form id = "questionpostsform" method="GET" action = "/ask">
				<input type="submit" id = "quesbtn" class="btn btn-primary btn-lg" value="Ask Question">
			</form>
				<h2>Telemetry with Ardupilot 2.6</h2>
<p>I'm using the telemetry kit from <a href="http://store.3drobotics.com/products/3dr-radio" rel="nofollow">3DR robotics</a> (433MHz) to interface with Ardupilot Mega 2.6, controlling a quadcopter. The <a href="http://planner.ardupilot.com/" rel="nofollow">Mission Planner</a> (v1.2.84) by Michael Oborne works well with the telemetry kit, transmitting flight data (IMU, compass, GPS etc.) from the quadcopter to the GCS and displaying them in their GUI.</p>

<p>However, I would like to see the same data in the hyperterminal (windows system). The radio receiver on the GCS connects to my PC through a USB drive. I have tried calling the remote radio station using all possible Baud rates, starting from 110 to 921600 (including 57600). I've set the <strong>data bits to 8</strong> and <strong>stop bits to 1</strong>. <strong>'None'</strong> for <strong>parity</strong> and <strong>flow control</strong>.</p>

<p>However, all that I ever get on my terminal is either gibberish or no data at all. I also tried burning this <a href="http://vps.oborne.me/3drradioconfig.zip" rel="nofollow">software</a> to the radio receiver and tried using AT commands on the radio. </p>

<p>It connects OK with '+++', but keeps returning error for AT1, ATT etc.</p>

<p>Please give me an idea about how to get flight data at the hyperterminal.</p>

<p>Thanks.</p>

			</div>
			<div class = "userinfosection"  id = "userinfo-2021" data-toggle = "popover">
				<p>user name : metsburg</p>
				<p> user reputation : 269</p>
				<p class = "tagcontent" id = "usertaginfo-2021">{'quadcopter': 15, 'None': 8, 'ardupilot': 6, 'accelerometer': 1, 'arduino': 13, 'ekf': 0, 'pid': 12, 'stability': 10, 'slam': 0}</p>
			</div><br>
			<br><h3>Comments</h3>
				<button data-toggle = 'collapse' data-target = "#commentsection-2021">Load Comments</button></br>
			<div id = "commentsection-2021" class = 'collapse'>
			<div id = "comment-4068" class = "comment">
				<p>Have you had a [look at the following](http://copter.ardupilot.com/wiki/common-using-the-3dr-radio-for-telemetry-with-apm-and-px4/#Serial_and_air_rates_8216one_byte_form8217)? Also, APM uses MAVLINK as far as I can tell (which is a binary format, so you won't really get anything of value from looking at hyperterminal output), perhaps you can also have a look at that (also discussed in the above link).</p>
			</div>
			<div id = "comment-4069" class = "comment">
				<p>@EDDY74: Yes, I went through that link before. I thought the CRC bits, Golay ECC etc. are stripped by the controller itself before sending it to the terminal! If not, then what is the format of the data coming in through the serial port? Is there a documentation of the data format? Let us say I write "XYZ" to Serial1 of the telemetry port in my APM2.6, so what am I going to see in the terminal?</p>
			</div>
			<div id = "comment-4070" class = "comment">
				<p>If you're interested in finding out more about mavlink, their [website](http://qgroundcontrol.org/mavlink/start) seems quite thoroughly documented. It seems the serial channel is capable of switching between MAVLINK and AT command set. Have you checked the difference between AT and RT (ie, RTI instead of ATI)?</p>
			</div>
			<div id = "comment-4071" class = "comment">
				<p>Also, if you're interested in viewing the received data in binary form, have a look at [tera term](http://ttssh2.sourceforge.jp/index.html.en) (as far as I remember it supports binary representation).</p>
			</div>
			<div id = "comment-4072" class = "comment">
				<p>Yes, I tried RTI instead of ATI. Didn't work. I will try Tera Term tomorrow and post an update here. The documentation of Mavlink looks good. I'm going through it in details.</p>
			</div>
			</div>
				<textarea id = "speech-2021" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-2021">
					<img id="start_img-2021" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-2021">Comment</button>

<h1>Answers</h1>
			<br><div id = "ans-2047"  class = "post">
				<h2>Answer</h2>
			<div id="vote-2047" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">1</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>From what I understand, this telemetry kit uses Mavlink as a protocol for data transfer and unless I follow the specific header, footer, data etc format for Mavlink, I will invariably end up with gibberish on my hyperterminal. This means in order to read and modify the telemetry data, I'd have to develop a Mavlink engine from scratch, right?</p>

<p><img src="https://i.stack.imgur.com/A6fuf.png" alt="Mavlink Data Format"></p>

<p>I would like to know if this problem can be cut short by using XBee radio Tx-Rx pair instead of the one 3DR is providing?</p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-2047" data-toggle = "popover">
				<p>user name : metsburg</p>
				<p> user reputation : 269</p>
				<p class = "tagcontent" id = "usertaginfo-2047">{'quadcopter': 15, 'None': 8, 'ardupilot': 6, 'accelerometer': 1, 'arduino': 13, 'ekf': 0, 'pid': 12, 'stability': 10, 'slam': 0}</p>
			</div><br><h3>Comments</h3>
				<button data-toggle = 'collapse' data-target = "#commentsection-2047">Load Comments</button></br>
			<div id = "commentsection-2047" class = 'collapse'>
			<div id = "comment-4101" class = "comment">
				<p>What's your ultimate goal? If you're trying to build your own PC based listener/logger, I'm sure it won't be that difficult to build a basic MAVLINK interpreter (depending on your PC side development environment). Have you decided on which dev environment you're going to use (ie, python in linux, or c# and .net, etc)?</p>
			</div>
			<div id = "comment-4104" class = "comment">
				<p>I'd actually prefer a platform independent environment, so that it works on all of Linux, Mac and Windows... Java perhaps???</p>
			</div>
			<div id = "comment-4105" class = "comment">
				<p>I'm sure you'll find load of examples of how to read data from a serial port in Java. I'd recommend just getting a small Java app going that connects to the Ardupilots serial port, and having a look at the data you receive and see if you can interpret the frame structure. From there you could perhaps reference the official [Ardupilot MAVLINK parameters](https://code.google.com/p/ardupilot-mega/wiki/MAVParam) (link may be out of date), to get an idea of how everything fits together.</p>
			</div>
			<div id = "comment-4115" class = "comment">
				<p>yes, I can read from serial port in java. The rest remains to be done. I get the workflow now. Just one question, I was wondering if it would be easier to get a XBee module for the telemetry and work with it? It doesn't come with its own encoding protocols, right?</p>
			</div>
			<div id = "comment-4117" class = "comment">
				<p>I'm not sure to be honest, I'm guessing it won't matter whether you use an XBee or that 3DR radio set, It'll still be the same underlying data (MAVLINK). I'm looking through the XStreamBee docs, and I'll let you know if I find anything.</p>
			</div>
			<div id = "comment-4118" class = "comment">
				<p>Ok, it does seem like any data transmitted across the APM telemetry port is indeed formatted as MAVLINK frames (regardless of which radio link you use - see the following [link discussing XBee interfaces](http://diydrones.com/forum/topics/telemetry-mavlink-messages)). It also seems [MAVProxy](http://www.qgroundcontrol.org/mavlink/mavproxy_startpage) is an easy way of getting familiar with the APM telemetry interface, perhaps you should start there.</p>
			</div>
			<div id = "comment-4119" class = "comment">
				<p>Right, it does seem like MAVLINK encoding is happening inside the APM hardware, so there won't be any difference with XBee or anything else. Got it.</p>
			</div>
			<div id = "comment-4164" class = "comment">
				<p>If you wish to do any post flight analysis then you can use some features within mission planner to access data. More details can be found at http://copter.ardupilot.com/wiki/downloading-and-analyzing-data-logs-in-mission-planner/</p>
			</div>
			</div>
				<textarea id = "speech-2047" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-2047">
					<img id="start_img-2047" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-2047">Comment</button>
			<br><div id = "ans-2051"  class = "post">
				<h2>Answer</h2>
			<div id="vote-2051" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">2</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>MAVLink is an encoded message. In order for you to get specific data out of it you will need to decode it in some way. There are a number of ways of doing this including writing your own code and attaching MAVlink to it. This is described here: <a href="http://qgroundcontrol.org/dev/mavlink_onboard_integration_tutorial" rel="nofollow">http://qgroundcontrol.org/dev/mavlink_onboard_integration_tutorial</a>. In order to use this you will have to have downloaded the mavlink libraries from the repository here: <a href="https://github.com/mavlink/mavlink" rel="nofollow">https://github.com/mavlink/mavlink</a>.</p>

<p>If you are wanting a platform independent java based implementation, a friend of mine Owen McAree developed MAVNode a Node.js based decoder for MAVLink which will decode the messages you require. It is a nvm repository <a href="https://npmjs.org/package/mavlink" rel="nofollow">https://npmjs.org/package/mavlink</a>.</p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-2051" data-toggle = "popover">
				<p>user name : Tom Bamber</p>
				<p> user reputation : 303</p>
				<p class = "tagcontent" id = "usertaginfo-2051">{'kinect': 3, 'mobile-robot': 5, 'None': 13}</p>
			</div><br><h3>Comments</h3>
				<button data-toggle = 'collapse' data-target = "#commentsection-2051">Load Comments</button></br>
			<div id = "commentsection-2051" class = 'collapse'>
			<div id = "comment-4116" class = "comment">
				<p>The Node.js based decoder is interesting... working on it now.</p>
			</div>
			</div>
				<textarea id = "speech-2051" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-2051">
					<img id="start_img-2051" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-2051">Comment</button>
			<br><div id = "ans-7342"  class = "post">
				<h2>Answer</h2>
			<div id="vote-7342" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">1</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>have a look to my Java Mavlink Library : <a href="https://code.google.com/p/mavlinkjava/" rel="nofollow">https://code.google.com/p/mavlinkjava/</a> It can be used on Android, Windows, Linux and Java RT JVM from IS2T.
Guillaume</p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-7342" data-toggle = "popover">
				<p>user name : Guillaume Helle</p>
				<p> user reputation : 11</p>
				<p class = "tagcontent" id = "usertaginfo-7342">{'None': 1}</p>
			</div><br><h3>Comments</h3><p>no comments yet<p><br>
			<div id = "commentsection-7342" class = 'collapse'>
			</div>
				<textarea id = "speech-7342" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-7342">
					<img id="start_img-7342" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-7342">Comment</button>
			</div>
			<div id = "resourcestab" class = "resourcestab">
				<ul class="nav nav-tabs">
					<li class="active"><a data-toggle="tab" href="#resources">Resources</a></li>
					<li><a data-toggle="tab" href="#summary">Summary</a></li>
				</ul>
					<div class="tab-content">
						<div id="resources" class="tab-pane fade in active">
							<h3>Resources</h3>
							<div id = "resourcescontent"></div>
						</div>
						<div id="summary" class="tab-pane fade">
							<h3>Summary</h3>
							<div id = "summarycontent"></div>
						</div>
			</div>
			</div>
			<footer>Moore & Peps collaboration.</footer>
	</div>
	<script src="/post.js"></script>
	<script type="text/javascript">
		$("#loginmodals").load("/loginModal.html");
		$("#issuemodals").load("/issueModal.html");
		$("#highlight_tool").load("/highlight_tool.html");
		checkLoggedInUser()
		var content = $('.content').html();
		populateResources(content)
		getHighlights()
		setOnLinksHover()
	</script>
	<script src="/media.js"></script>
	<script src="/vote.js"></script>
	<script src="/managefunction.js"></script>
	</body>
</html>