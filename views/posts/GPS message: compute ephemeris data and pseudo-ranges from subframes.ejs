<html>
	<head>
		<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="  crossorigin="anonymous"></script>
		<script src = "/jquery-highlight.js"></script>
		<link href="/jquery.upvote.css" rel="stylesheet">
		<script src = "/jquery.upvote.js" type="text/javascript"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="/style.css"/>
		<script src="/createlinks.js"></script>
		<script src="/textaudit.js"></script>
		<script src="/PorterStemmer1980.min.js"></script>
		<script src="/highlight.js"></script>
		<title id = 'pagetitle'>GPS message: compute ephemeris data and pseudo-ranges from subframes
		</title>
	</head>
	<body id = 'pagebody'>
		<div id = "loginmodals"></div>
		<div id = "issuemodals"></div>
		<div id = "highlight_tool"></div>
		<div id = "comment_tool"></div>
		<div class = "container">
			<header>
				<h1>Just Another Discussion Forum</h1>
			</header>
			<div class="topnav" id="myTopnav">
				<a href="/home">Home</a>
				<a href = "#issueModal" data-toggle="modal" style = "float:right">Report Issue</a>
			</div>
			<div class = "content">
			<div id = "ques-12023" class = "post">
			<h2>Question</h2>
			<div id="vote-12023" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">0</span>
				<a class="downvote"></a>
				<a class="star"></a>
				<p>Views :: 65</p>
			</div>
			<form id = "questionpostsform" method="GET" action = "/ask">
				<input type="submit" id = "quesbtn" class="btn btn-primary btn-lg" value="Ask Question">
			</form>
				<h2>GPS message: compute ephemeris data and pseudo-ranges from subframes</h2>
<p>I have raw GPS data (see end of the question for details if you think the protocols are relevant), and I need to extract/compute ephemeris and pseudoranges (my goal is to replace the recursive least squares that the receiver solves to compute the position with a home-brewed method based on sensor fusion). Concerning the ephemeris, I have access to the 3 first subframes of each of the 25 frames of the GPS message. Documentations/books/etc that I have found just vaguely mention that the first subframe contains clock data, and the two others contain ephemeris data. However, none of them precisely says what the words in these subframes are, and how I can use them to compute orbital information (I'm assuming that I only want satellite positions?). Can anyone give me pointers to some references on how to do this? Or (even better), is there any open-source code that already implements this?</p>

<p>I really appreciate your help.</p>

<p><strong>Details on the data:</strong> They have been transmitted by a Ublox EVK-7p using the UBX RXM-EPH and RXM-RAW protocols.</p>

<p>RXM-EPH: satellite ID (4 byes), HOW word (4 bytes), followed by three 32-byte arrays corresponding to subrames 1 to 3 of the GPS message.</p>

<p>RXM-RAW: time of week, week, num of satellites, reserved (?) , carrier phase, pseudo-range, doppler, and so on....</p>

<p><strong>Update:</strong> I found <a href="https://www.google.fr/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=2&amp;ved=0ahUKEwjBgcb6movTAhVBiRoKHT9EBNUQFggrMAE&amp;url=http%3A%2F%2Fwww.gps.gov%2Ftechnical%2Fps%2F1995-SPS-signal-specification.pdf&amp;usg=AFQjCNG1d7nRQ7jgaMjYFqK0afiJU8a0yw&amp;sig2=lVReCa_IZFZwcYSk5ZAydQ" rel="nofollow noreferrer">this</a> which seems to answer most of my questions. It is from 1995 though.</p>

			</div>
			<div class = "userinfosection"  id = "userinfo-12023" data-toggle = "popover">
				<p>user name : Ash</p>
				<p> user reputation : 197</p>
				<p class = "tagcontent" id = "usertaginfo-12023">{'None': 1, 'computer-vision': 2, 'localization': 1, 'ekf': 1, 'visual-odometry': 1, 'gnss': 2, 'particle-filter': 8, 'slam': 11, 'kalman-filter': 1, 'pseudo-ranges': 2, 'sensors': 2, 'ephemeris': 2, 'gps': 2}</p>
			</div><br>
			<br><h3>Comments</h3><p>no comments yet<p><br>
			<div id = "commentsection-12023" class = 'collapse'>
			</div>
				<textarea id = "speech-12023" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-12023">
					<img id="start_img-12023" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-12023">Comment</button>

<h1>Answers</h1>
			<br><div id = "ans-12030"  class = "post">
				<h2>Answer</h2>
			<div id="vote-12030" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">1</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>The GPS standard has been the same since the first GPS satellites were launched, so sources from 1995 are very relevant In fact that is the document I would point you to. One of the best libraries for decoding GPS is <a href="http://gnss-sdr.org/" rel="nofollow noreferrer">gnss-sdr</a>, You can look at how they are doing protocol decoding in order to get an idea of how to implement it.</p>

<p>Other docs I would point you would be the <a href="http://www.gps.gov/" rel="nofollow noreferrer">official GPS website</a> and the <a href="http://www.gps.gov/technical/icwg/" rel="nofollow noreferrer">interface control documents</a>. There is a ton of useful information there.</p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-12030" data-toggle = "popover">
				<p>user name : Mark Omo</p>
				<p> user reputation : 1786</p>
				<p class = "tagcontent" id = "usertaginfo-12030">{'None': 119}</p>
			</div><br><h3>Comments</h3><p>no comments yet<p><br>
			<div id = "commentsection-12030" class = 'collapse'>
			</div>
				<textarea id = "speech-12030" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-12030">
					<img id="start_img-12030" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-12030">Comment</button>
			<br><div id = "ans-12815"  class = "post">
				<h2>Answer</h2>
			<div id="vote-12815" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">1</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>So the RXM-RAW and RXM-EPH messages come from IS-GPS-200H interface control document found here. 
<a href="http://www.gps.gov/technical/icwg/IS-GPS-200H.pdf" rel="nofollow noreferrer">http://www.gps.gov/technical/icwg/IS-GPS-200H.pdf</a> </p>

<p>But these are not exactly the same as RXM-RAW RXM-EPH messages. Namely there is a byte offset because the ublox messages contain a header and a checksum. </p>

<p>But this file here should be helpful to what you want to do.
<a href="http://gnsstk.sourceforge.net/gps_8c-source.html#l00714" rel="nofollow noreferrer">http://gnsstk.sourceforge.net/gps_8c-source.html#l00714</a>.</p>

<p>Remember to multiply by the correct scale factor to make sure your units are right. (semi circles are not the same thing as radians). </p>

<p>A good method for checking your work would be to use rtklib to get your ublox to output it's messages to a a rinex.o file and compare to the code that you wrote.</p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-12815" data-toggle = "popover">
				<p>user name : rielt12</p>
				<p> user reputation : 23</p>
				<p class = "tagcontent" id = "usertaginfo-12815">{'None': 2, 'kalman-filter': 0, 'calibration': 0, 'gnss': 0, 'imu': 0, 'sensor-fusion': 0, 'gps': 0}</p>
			</div><br><h3>Comments</h3><p>no comments yet<p><br>
			<div id = "commentsection-12815" class = 'collapse'>
			</div>
				<textarea id = "speech-12815" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-12815">
					<img id="start_img-12815" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-12815">Comment</button>
			</div>
			<div id = "resourcestab" class = "resourcestab">
				<ul class="nav nav-tabs">
					<li class="active"><a data-toggle="tab" href="#resources">Resources</a></li>
					<li><a data-toggle="tab" href="#summary">Summary</a></li>
					<li><a data-toggle="tab" href="#highlights">Highlights</a></li>
				</ul>
					<div class="tab-content">
						<div id="resources" class="tab-pane fade in active">
							<h3>Links from the Page</h3>
							<div id = "resourcescontent"></div>
						</div>
						<div id="summary" class="tab-pane fade">
							<h3>Summary</h3>
							<div id = "summarycontent"></div>
						</div>
						<div id="highlights" class="tab-pane fade">
							<h3>Highlights</h3>
							<div id = "highlightcontent"></div>
						</div>
			</div>
			</div>
			<footer>Moore & Peps collaboration.</footer>
	</div>
	<script src="/post.js"></script>
	<script type="text/javascript">
		$("#loginmodals").load("/loginModal.html");
		$("#issuemodals").load("/issueModal.html");
		$("#highlight_tool").load("/highlight_tool.html");
		$("#comment_tool").load("/comment_tool.html");
		checkLoggedInUser()
		var content = $('.content').html();
		populateResources(content)
		getHighlights()
		setOnLinksHover()
	</script>
	<script src="/media.js"></script>
	<script src="/vote.js"></script>
	<script src="/managefunction.js"></script>
	</body>
</html>