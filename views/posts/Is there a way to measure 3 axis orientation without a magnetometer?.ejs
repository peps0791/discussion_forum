<html>
	<head>
		<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="  crossorigin="anonymous"></script>
		<script src = "/jquery-highlight.js"></script>
		<link href="/jquery.upvote.css" rel="stylesheet">
		<script src = "/jquery.upvote.js" type="text/javascript"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="/style.css"/>
		<script src="/createlinks.js"></script>
		<script src="/textaudit.js"></script>
		<script src="/PorterStemmer1980.min.js"></script>
		<script src="/highlight.js"></script>
		<title id = 'pagetitle'>Is there a way to measure 3 axis orientation without a magnetometer?
		</title>
	</head>
	<body id = 'pagebody'>
		<div id = "loginmodals"></div>
		<div id = "issuemodals"></div>
		<div id = "highlight_tool"></div>
		<div id = "comment_tool"></div>
		<div class = "container">
			<header>
				<h1>Just Another Discussion Forum</h1>
			</header>
			<div class="topnav" id="myTopnav">
				<a href="/home">Home</a>
				<a href = "#issueModal" data-toggle="modal" style = "float:right">Report Issue</a>
			</div>
			<div class = "content">
			<div id = "ques-9023" class = "post">
			<h2>Question</h2>
			<div id="vote-9023" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">4</span>
				<a class="downvote"></a>
				<a class="star"></a>
				<p>Views :: 504</p>
			</div>
			<form id = "questionpostsform" method="GET" action = "/ask">
				<input type="submit" id = "quesbtn" class="btn btn-primary btn-lg" value="Ask Question">
			</form>
				<h2>Is there a way to measure 3 axis orientation without a magnetometer?</h2>
<p>I have bought an STM iNEMO evaluation board in order to monitor the inclination of a separate magnetic sensor array as it moves in a linear scan outside of a (non-magnetic) stainless steel pipe. I want to measure the inclination of the sensor along the scan and ensure that it does not change. The problem I have found is that the measured magnetic field from the integrated magnetometer varies greatly with position along the pipe, and in turn, causes a large, position dependent error in one axis of the inclination reported by the iNEMO IMU. In fig. 1 below I show the set up of the test, I measured the inclination from the IMU while moving it along the length of the pipe and back again. The board did not change inclination throughout the measurement. In Fig 2 I show the magnetometer and inclination measurements recorded by the "iNEMO application" showing the large error in one of the inclinations.</p>

<p>My question is whether you know if there is any way of correcting for the magnetic field variation so that I can still accurately determine the inclination in all three directions? My data suggests to me that the magnetic field variation measured from the magnetometer is much greater than the geomagnetic field, so the inclination measurement will always be inaccurate. A follow up question I then have is: Is there a way to measure 3 axis orientation WITHOUT using a magnetometer?</p>

<p><a href="https://i.stack.imgur.com/V3Z4I.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/V3Z4I.png" alt="Fig. 1: Movement of IMU along length of pipe"></a></p>

<p><a href="https://i.stack.imgur.com/Ac1rF.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/Ac1rF.png" alt="iNemo magnetometer and inclination data when scanning from left to right of the pipe"></a></p>

			</div>
			<div class = "userinfosection"  id = "userinfo-9023" data-toggle = "popover">
				<p>user name : phujeb</p>
				<p> user reputation : 21</p>
				<p class = "tagcontent" id = "usertaginfo-9023">{'magnetometer': 4, 'None': 0, 'imu': 4, 'orientation': 4, 'gyroscope': 4}</p>
			</div><br>
			<br><h3>Comments</h3>
				<button data-toggle = 'collapse' data-target = "#commentsection-9023">Load Comments</button></br>
			<div id = "commentsection-9023" class = 'collapse'>
			<div id = "comment-14852" class = "comment">
				<p>One way could be to calibrate the gyros over temperature, that would already give much less drift on the yaw.</p>
			</div>
			<div id = "comment-14853" class = "comment">
				<p>Okay, the iNEMO board does include a thermocouple and pressure sensor too, I believe these are used in the data fusion algorithms that report the inclination. As you can see from the graphs though, the drift seems to be very position dependent. I moved the sensor between the left and right edge of the pipe multiple times and I received the same result for the yaw, so Im not sure temperature compensation would help here.</p>
			</div>
			</div>
				<textarea id = "speech-9023" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-9023">
					<img id="start_img-9023" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-9023">Comment</button>

<h1>Answers</h1>
			<br><div id = "ans-9026"  class = "post">
				<h2>Answer</h2>
			<div id="vote-9026" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">-1</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>You can incorporate an Inertial Measurement Unit.  Often they are a combination of a 3-axis accelerometer and a 2- or 3-axis gyroscope.  Here is a link to a description of one family of such devices: <a href="https://www.sparkfun.com/pages/accel_gyro_guide" rel="nofollow">https://www.sparkfun.com/pages/accel_gyro_guide</a></p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-9026" data-toggle = "popover">
				<p>user name : SteveO</p>
				<p> user reputation : 2960</p>
				<p class = "tagcontent" id = "usertaginfo-9026">{'None': 222}</p>
			</div><br><h3>Comments</h3><p>no comments yet<p><br>
			<div id = "commentsection-9026" class = 'collapse'>
			</div>
				<textarea id = "speech-9026" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-9026">
					<img id="start_img-9026" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-9026">Comment</button>
			<br><div id = "ans-9029"  class = "post">
				<h2>Answer</h2>
			<div id="vote-9029" class="upvote" style="float:left;">
				<a class="upvote"></a>
				<span class="count">3</span>
				<a class="downvote"></a>
				<a class="star"></a>
			</div>
				<p><p>Calibration procedures for magnetometers exist, to compensate for soft iron (nearby ferromagnetic objects) and hard iron (nearby magnetic fields) offsets, which skew the measurements. However, these procedures usually map a static disturbance correction and apply it to all new measurements.
On the contrary, your environment changes from one end of the tube to the other.</p>

<p>If your magnetic sensor is allowed to move (relatively) slowly over the pipe under inspection, then you could use a 6-DOF IMU (Accelerometer + gyroscope) or even a 3-DOF accelerometer to find the orientation of the sensor <strong>but only in the pitch and roll axes</strong>.
If the magnetic sensor is expected to be under sustained accelerations, then a 6-DOF IMU won't be adequate.</p>

<p>Are roll and pitch values adequate for your application?</p>
</p><br>
			</div>
			<div class = "userinfosection"  id = "userinfo-9029" data-toggle = "popover">
				<p>user name : George ZP</p>
				<p> user reputation : 461</p>
				<p class = "tagcontent" id = "usertaginfo-9029">{'None': 27}</p>
			</div><br><h3>Comments</h3>
				<button data-toggle = 'collapse' data-target = "#commentsection-9029">Load Comments</button></br>
			<div id = "commentsection-9029" class = 'collapse'>
			<div id = "comment-14880" class = "comment">
				<p>Thanks for your reply. I suppose it depends on how slowly is slowly... The potential application is to determine the orientation of a separate sensor array that measures the magnetic field surrounding the pipe that is induced by an electric current flowing axially along the pipe. The induced field will be all in the azimuthal direction and I want to ensure that the magnetic sensors are oriented along the cylindrical co-ordinate system of the pipe. I believe the array would move at a maximum constant speed of ~1m/s and I don't foresee there being sudden accelerations. I'll try the 6-DOF calc.</p>
			</div>
			<div id = "comment-14881" class = "comment">
				<p>If you are interested in measuring all 3 components of the magnetic field around the pipe and not just its magnitude, then the inability to calibrate the yaw axis may degrade your readings. Perhaps you could mechanically lock your yaw rotation to avoid that. On the other side, if you are interested only in the magnetic field magnitude, then the rotation of your sensor won't affect that result and no calibration is needed.</p>
			</div>
			<div id = "comment-14882" class = "comment">
				<p>Indeed, I think mechanically locking the yaw is going to be the only option. Do you know any other way of measuring yaw that doesn't rely on magnetic measurements?</p>
			</div>
			<div id = "comment-14883" class = "comment">
				<p>Perhaps an optical AHRS system would perform (in the form of a machine camera and a vision algorithm), but the cost will increase dramatically, for any level of usable precision, methinks.</p>
			</div>
			<div id = "comment-14884" class = "comment">
				<p>Yes, I think so too. It wouldn't be feasible in my application either. Back to the drawing board!</p>
			</div>
			</div>
				<textarea id = "speech-9029" rows="3" cols="80"></textarea><br>
				<button class="record-start" id="start-9029">
					<img id="start_img-9029" src="/mic.gif" alt="Start">
				</button>
				<button class = "comment-btn" id = "comment-btn-9029">Comment</button>
			</div>
			<div id = "resourcestab" class = "resourcestab">
				<ul class="nav nav-tabs">
					<li class="active"><a data-toggle="tab" href="#resources">Resources</a></li>
					<li><a data-toggle="tab" href="#summary">Summary</a></li>
					<li><a data-toggle="tab" href="#highlights">Highlights</a></li>
				</ul>
					<div class="tab-content">
						<div id="resources" class="tab-pane fade in active">
							<h3>Links from the Page</h3>
							<div id = "resourcescontent"></div>
						</div>
						<div id="summary" class="tab-pane fade">
							<h3>Summary</h3>
							<div id = "summarycontent"></div>
						</div>
						<div id="highlights" class="tab-pane fade">
							<h3>Highlights</h3>
							<div id = "highlightcontent"></div>
						</div>
			</div>
			</div>
			<footer>Moore & Peps collaboration.</footer>
	</div>
	<script src="/post.js"></script>
	<script type="text/javascript">
		$("#loginmodals").load("/loginModal.html");
		$("#issuemodals").load("/issueModal.html");
		$("#highlight_tool").load("/highlight_tool.html");
		$("#comment_tool").load("/comment_tool.html");
		checkLoggedInUser()
		var content = $('.content').html();
		populateResources(content)
		getHighlights()
		setOnLinksHover()
	</script>
	<script src="/media.js"></script>
	<script src="/vote.js"></script>
	<script src="/managefunction.js"></script>
	</body>
</html>